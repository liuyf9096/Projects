#include "DMagicianProtocol.h"

#include <QDataStream>
#include <QJsonArray>
#include <QDateTime>
#include <QTime>
#include <QtEndian>
#include <QDebug>

DMagicianProtocol *DMagicianProtocol::getInstance()
{
    static DMagicianProtocol *instance = nullptr;
    if (instance == nullptr) {
        instance = new DMagicianProtocol();
    }
    return instance;
}

DMagicianProtocol::DMagicianProtocol(QObject *parent) : QObject(parent)
{
    _packetFunctionInit();
    _parseFunctionInit();
}

void DMagicianProtocol::_packetFunctionInit()
{
    /* id:0~7 */
    m_encodeFuncMap.insert("SetDeviceSN", &DMagicianProtocol::encodeSetDeviceSN);
    m_encodeFuncMap.insert("GetDeviceSN", &DMagicianProtocol::encodeGetDeviceSN);
    m_encodeFuncMap.insert("SetDeviceName", &DMagicianProtocol::encodeSetDeviceName);
    m_encodeFuncMap.insert("GetDeviceName", &DMagicianProtocol::encodeGetDeviceName);
    m_encodeFuncMap.insert("GetDeviceVersion", &DMagicianProtocol::encodeGetDeviceVersion);
    m_encodeFuncMap.insert("SetDeviceWithL", &DMagicianProtocol::encodeSetDeviceWithL);
    m_encodeFuncMap.insert("GetDeviceWithL", &DMagicianProtocol::encodeGetDeviceWithL);
    m_encodeFuncMap.insert("GetDeviceTime", &DMagicianProtocol::encodeGetDeviceTime);
    m_encodeFuncMap.insert("GetDeviceID", &DMagicianProtocol::encodeGetDeviceID);
    m_encodeFuncMap.insert("GetProductName", &DMagicianProtocol::encodeGetProductName);
    m_encodeFuncMap.insert("SetOLEDDisplay", &DMagicianProtocol::encodeSetOLEDDisplay);
    m_encodeFuncMap.insert("SetProgressBar", &DMagicianProtocol::encodeSetProgressBar);

    /* id:10~13 */
    m_encodeFuncMap.insert("GetPose", &DMagicianProtocol::encodeGetPose);
    m_encodeFuncMap.insert("ResetPose", &DMagicianProtocol::encodeResetPose);
    m_encodeFuncMap.insert("GetPoseL", &DMagicianProtocol::encodeGetPoseL);

    /* id:20 */
    m_encodeFuncMap.insert("GetAlarmsState", &DMagicianProtocol::encodeGetAlarmsState);
    m_encodeFuncMap.insert("ClearAllAlarmsState", &DMagicianProtocol::encodeClearAllAlarmsState);

    /* id:30~33 */
    m_encodeFuncMap.insert("SetHOMEParams", &DMagicianProtocol::encodeSetHOMEParams);
    m_encodeFuncMap.insert("GetHOMEParams", &DMagicianProtocol::encodeGetHOMEParams);
    m_encodeFuncMap.insert("SetHOMECmd", &DMagicianProtocol::encodeSetHOMECmd);
    m_encodeFuncMap.insert("SetAutoLeveling", &DMagicianProtocol::encodeSetAutoLeveling);
    m_encodeFuncMap.insert("GetAutoLeveling", &DMagicianProtocol::encodeGetAutoLeveling);
    m_encodeFuncMap.insert("GetGoHomeStatus", &DMagicianProtocol::encodeGetGoHomeStatus);

    /* id:40~42 */
    m_encodeFuncMap.insert("SetHHTTrigMode", &DMagicianProtocol::encodeSetHHTTrigMode);
    m_encodeFuncMap.insert("GetHHTTrigMode", &DMagicianProtocol::encodeGetHHTTrigMode);
    m_encodeFuncMap.insert("SetHHTTrigOutputEnabled", &DMagicianProtocol::encodeSetHHTTrigOutputEnabled);
    m_encodeFuncMap.insert("GetHHTTrigOutputEnabled", &DMagicianProtocol::encodeGetHHTTrigOutputEnabled);
    m_encodeFuncMap.insert("GetHHTTrigOutput", &DMagicianProtocol::encodeGetHHTTrigOutput);

    /* id:62~66 */
    m_encodeFuncMap.insert("SetEndEffectorParams", &DMagicianProtocol::encodeSetEndEffectorParams);
    m_encodeFuncMap.insert("GetEndEffectorParams", &DMagicianProtocol::encodeGetEndEffectorParams);
    m_encodeFuncMap.insert("SetEndEffectorLaser", &DMagicianProtocol::encodeSetEndEffectorLaser);
    m_encodeFuncMap.insert("GetEndEffectorLaser", &DMagicianProtocol::encodeGetEndEffectorLaser);
    m_encodeFuncMap.insert("SetEndEffectorSuctionCup", &DMagicianProtocol::encodeSetEndEffectorSuctionCup);
    m_encodeFuncMap.insert("GetEndEffectorSuctionCup", &DMagicianProtocol::encodeGetEndEffectorSuctionCup);
    m_encodeFuncMap.insert("SetEndEffectorGripper", &DMagicianProtocol::encodeSetEndEffectorGripper);
    m_encodeFuncMap.insert("GetEndEffectorGripper", &DMagicianProtocol::encodeGetEndEffectorGripper);
    m_encodeFuncMap.insert("SetEndEffectorType", &DMagicianProtocol::encodeSetEndEffectorType);
    m_encodeFuncMap.insert("GetEndEffectorType", &DMagicianProtocol::encodeGetEndEffectorType);
    m_encodeFuncMap.insert("SetServoAngle", &DMagicianProtocol::encodeSetServoAngle);
    m_encodeFuncMap.insert("GetServoAngle", &DMagicianProtocol::encodeGetServoAngle);
    m_encodeFuncMap.insert("SetArmSpeedRatio", &DMagicianProtocol::encodeSetArmSpeedRatio);
    m_encodeFuncMap.insert("GetArmSpeedRatio", &DMagicianProtocol::encodeGetArmSpeedRatio);

    /* id:70~74 */
    m_encodeFuncMap.insert("SetJOGJointParams", &DMagicianProtocol::encodeSetJOGJointParams);
    m_encodeFuncMap.insert("GetJOGJointParams", &DMagicianProtocol::encodeGetJOGJointParams);
    m_encodeFuncMap.insert("SetJOGCoordinateParams", &DMagicianProtocol::encodeSetJOGCoordinateParams);
    m_encodeFuncMap.insert("GetJOGCoordinateParams", &DMagicianProtocol::encodeGetJOGCoordinateParams);
    m_encodeFuncMap.insert("SetJOGCommonParams", &DMagicianProtocol::encodeSetJOGCommonParams);
    m_encodeFuncMap.insert("GetJOGCommonParams", &DMagicianProtocol::encodeGetJOGCommonParams);
    m_encodeFuncMap.insert("SetJOGCmd", &DMagicianProtocol::encodeSetJOGCmd);
    m_encodeFuncMap.insert("SetJOGLParams", &DMagicianProtocol::encodeSetJOGLParams);
    m_encodeFuncMap.insert("GetJOGLParams", &DMagicianProtocol::encodeGetJOGLParams);

    /* id:80~89 */
    m_encodeFuncMap.insert("SetPTPJointParams", &DMagicianProtocol::encodeSetPTPJointParams);
    m_encodeFuncMap.insert("GetPTPJointParams", &DMagicianProtocol::encodeGetPTPJointParams);
    m_encodeFuncMap.insert("SetPTPCoordinateParams", &DMagicianProtocol::encodeSetPTPCoordinateParams);
    m_encodeFuncMap.insert("GetPTPCoordinateParams", &DMagicianProtocol::encodeGetPTPCoordinateParams);
    m_encodeFuncMap.insert("SetPTPJumpParams", &DMagicianProtocol::encodeSetPTPJumpParams);
    m_encodeFuncMap.insert("GetPTPJumpParams", &DMagicianProtocol::encodeGetPTPJumpParams);
    m_encodeFuncMap.insert("SetPTPCommonParams", &DMagicianProtocol::encodeSetPTPCommonParams);
    m_encodeFuncMap.insert("GetPTPCommonParams", &DMagicianProtocol::encodeGetPTPCommonParams);
    m_encodeFuncMap.insert("SetPTPCmd", &DMagicianProtocol::encodeSetPTPCmd);
    m_encodeFuncMap.insert("SetPTPLParams", &DMagicianProtocol::encodeSetPTPLParams);
    m_encodeFuncMap.insert("GetPTPLParams", &DMagicianProtocol::encodeGetPTPLParams);
    m_encodeFuncMap.insert("SetPTPWithLCmd", &DMagicianProtocol::encodeSetPTPWithLCmd);
    m_encodeFuncMap.insert("SetPTPJump2Params", &DMagicianProtocol::encodeSetPTPJump2Params);
    m_encodeFuncMap.insert("GetPTPJump2Params", &DMagicianProtocol::encodeGetPTPJump2Params);
    m_encodeFuncMap.insert("SetPTPPOCmd", &DMagicianProtocol::encodeSetPTPPOCmd);
    m_encodeFuncMap.insert("SetPTPPOWithLCmd", &DMagicianProtocol::encodeSetPTPPOWithLCmd);

    /* id:90~95 */
    m_encodeFuncMap.insert("SetCPParams", &DMagicianProtocol::encodeSetCPParams);
    m_encodeFuncMap.insert("GetCPParams", &DMagicianProtocol::encodeGetCPParams);
    m_encodeFuncMap.insert("SetCPCmd", &DMagicianProtocol::encodeSetCPCmd);
    m_encodeFuncMap.insert("SetCPLECmd", &DMagicianProtocol::encodeSetCPLECmd);
    m_encodeFuncMap.insert("SetCPRHeadHoldEnable", &DMagicianProtocol::encodeSetCPRHeadHoldEnable);
    m_encodeFuncMap.insert("GetCPRHeadHoldEnable", &DMagicianProtocol::encodeGetCPRHeadHoldEnable);
    m_encodeFuncMap.insert("SetCPCommonParams", &DMagicianProtocol::encodeSetCPCommonParams);
    m_encodeFuncMap.insert("GetCPCommonParams", &DMagicianProtocol::encodeGetCPCommonParams);
    m_encodeFuncMap.insert("SetCP2Cmd", &DMagicianProtocol::encodeSetCP2Cmd);

    /* id:100~103 */
    m_encodeFuncMap.insert("SetARCParams", &DMagicianProtocol::encodeSetARCParams);
    m_encodeFuncMap.insert("GetARCParams", &DMagicianProtocol::encodeGetARCParams);
    m_encodeFuncMap.insert("SetARCCmd", &DMagicianProtocol::encodeSetARCCmd);
    m_encodeFuncMap.insert("SetCircleCmd", &DMagicianProtocol::encodeSetCircleCmd);
    m_encodeFuncMap.insert("SetARCCommonParams", &DMagicianProtocol::encodeSetARCCommonParams);
    m_encodeFuncMap.insert("GetARCCommonParams", &DMagicianProtocol::encodeGetARCCommonParams);

    /* id:110 */
    m_encodeFuncMap.insert("SetWAITCmd", &DMagicianProtocol::encodeSetWAITCmd);

    /* id:120 */
    m_encodeFuncMap.insert("SetTRIGCmd", &DMagicianProtocol::encodeSetTRIGCmd);

    /* id:130~139 */
    m_encodeFuncMap.insert("SetIOMultiplexing", &DMagicianProtocol::encodeSetIOMultiplexing);
    m_encodeFuncMap.insert("GetIOMultiplexing", &DMagicianProtocol::encodeGetIOMultiplexing);
    m_encodeFuncMap.insert("SetIODO", &DMagicianProtocol::encodeSetIODO);
    m_encodeFuncMap.insert("GetIODO", &DMagicianProtocol::encodeGetIODO);
    m_encodeFuncMap.insert("SetIOPWM", &DMagicianProtocol::encodeSetIOPWM);
    m_encodeFuncMap.insert("GetIOPWM", &DMagicianProtocol::encodeGetIOPWM);
    m_encodeFuncMap.insert("GetIODI", &DMagicianProtocol::encodeGetIODI);
    m_encodeFuncMap.insert("GetIOADC", &DMagicianProtocol::encodeGetIOADC);
    m_encodeFuncMap.insert("SetEMotor", &DMagicianProtocol::encodeSetEMotor);
    m_encodeFuncMap.insert("SetEMotorS", &DMagicianProtocol::encodeSetEMotorS);
    m_encodeFuncMap.insert("SetColorSensor", &DMagicianProtocol::encodeSetColorSensor);
    m_encodeFuncMap.insert("GetColorSensor", &DMagicianProtocol::encodeGetColorSensor);
    m_encodeFuncMap.insert("SetInfraredSensor", &DMagicianProtocol::encodeSetInfraredSensor);
    m_encodeFuncMap.insert("GetInfraredSensor", &DMagicianProtocol::encodeGetInfraredSensor);
    m_encodeFuncMap.insert("SetIICInfo", &DMagicianProtocol::encodeSetIICInfo);
    m_encodeFuncMap.insert("GetIICInfo", &DMagicianProtocol::encodeGetIICInfo);

    /* id:140~143 */
    m_encodeFuncMap.insert("SetAngleSensorStaticError", &DMagicianProtocol::encodeSetAngleSensorStaticError);
    m_encodeFuncMap.insert("GetAngleSensorStaticError", &DMagicianProtocol::encodeGetAngleSensorStaticError);
    m_encodeFuncMap.insert("SetAngleSensorCoef", &DMagicianProtocol::encodeSetAngleSensorCoef);
    m_encodeFuncMap.insert("GetAngleSensorCoef", &DMagicianProtocol::encodeGetAngleSensorCoef);
    m_encodeFuncMap.insert("SetBaseDecoderStaticError", &DMagicianProtocol::encodeSetBaseDecoderStaticError);
    m_encodeFuncMap.insert("GetBaseDecoderStaticError", &DMagicianProtocol::encodeGetBaseDecoderStaticError);
    m_encodeFuncMap.insert("SetLRHandCalibrateValue", &DMagicianProtocol::encodeSetLRHandCalibrateValue);
    m_encodeFuncMap.insert("GetLRHandCalibrateValue", &DMagicianProtocol::encodeGetLRHandCalibrateValue);

    /* id:150~157 */
    m_encodeFuncMap.insert("SetWIFIConfigMode", &DMagicianProtocol::encodeSetWIFIConfigMode);
    m_encodeFuncMap.insert("GetWIFIConfigMode", &DMagicianProtocol::encodeGetWIFIConfigMode);
    m_encodeFuncMap.insert("SetWIFISSID", &DMagicianProtocol::encodeSetWIFISSID);
    m_encodeFuncMap.insert("GetWIFISSID", &DMagicianProtocol::encodeGetWIFISSID);
    m_encodeFuncMap.insert("SetWIFIPassword", &DMagicianProtocol::encodeSetWIFIPassword);
    m_encodeFuncMap.insert("GetWIFIPassword", &DMagicianProtocol::encodeGetWIFIPassword);
    m_encodeFuncMap.insert("SetWIFIIPAddress", &DMagicianProtocol::encodeSetWIFIIPAddress);
    m_encodeFuncMap.insert("GetWIFIIPAddress", &DMagicianProtocol::encodeGetWIFIIPAddress);
    m_encodeFuncMap.insert("SetWIFINetmask", &DMagicianProtocol::encodeSetWIFINetmask);
    m_encodeFuncMap.insert("GetWIFINetmask", &DMagicianProtocol::encodeGetWIFINetmask);
    m_encodeFuncMap.insert("SetWIFIGateway", &DMagicianProtocol::encodeSetWIFIGateway);
    m_encodeFuncMap.insert("GetWIFIGateway", &DMagicianProtocol::encodeGetWIFIGateway);
    m_encodeFuncMap.insert("SetWIFIDNS", &DMagicianProtocol::encodeSetWIFIDNS);
    m_encodeFuncMap.insert("GetWIFIDNS", &DMagicianProtocol::encodeGetWIFIDNS);
    m_encodeFuncMap.insert("GetWIFIConnectStatus", &DMagicianProtocol::encodeGetWIFIConnectStatus);

    /* id:170~171 */
    m_encodeFuncMap.insert("SetLostStepValue", &DMagicianProtocol::encodeSetLostStepValue);
    m_encodeFuncMap.insert("SetLostStepCmd", &DMagicianProtocol::encodeSetLostStepCmd);
    m_encodeFuncMap.insert("SetCollisionCheck", &DMagicianProtocol::encodeSetCollisionCheck);
    m_encodeFuncMap.insert("GetCollisionCheck", &DMagicianProtocol::encodeGetCollisionCheck);

    /* id:192~198 */
    m_encodeFuncMap.insert("GetDeviceStatus", &DMagicianProtocol::encodeGetDeviceStatus);
    m_encodeFuncMap.insert("SetDeviceRunAPP", &DMagicianProtocol::encodeSetDeviceRunAPP);
    m_encodeFuncMap.insert("SetUpgradeStatus", &DMagicianProtocol::encodeSetUpgradeStatus);
    m_encodeFuncMap.insert("GetUpgradeStatus", &DMagicianProtocol::encodeGetUpgradeStatus);
    m_encodeFuncMap.insert("SetRunUpgrade", &DMagicianProtocol::encodeSetRunUpgrade);
    m_encodeFuncMap.insert("SetStartTransmit", &DMagicianProtocol::encodeSetStartTransmit);
    m_encodeFuncMap.insert("SetUpgradeVeify", &DMagicianProtocol::encodeSetUpgradeVeify);
    m_encodeFuncMap.insert("SetDeviceRestart", &DMagicianProtocol::encodeSetDeviceRestart);

    /* id:210~215 */
    m_encodeFuncMap.insert("GetSeeedDistanceSensor", &DMagicianProtocol::encodeGetSeeedDistanceSensor);
    m_encodeFuncMap.insert("SetSeeedTempSensor", &DMagicianProtocol::encodeSetSeeedTempSensor);
    m_encodeFuncMap.insert("GetSeeedTempSensor", &DMagicianProtocol::encodeGetSeeedTempSensor);
    m_encodeFuncMap.insert("SetSeeedLightSensor", &DMagicianProtocol::encodeSetSeeedLightSensor);
    m_encodeFuncMap.insert("GetSeeedLightSensor", &DMagicianProtocol::encodeGetSeeedLightSensor);
    m_encodeFuncMap.insert("SetSeeedColorSensor", &DMagicianProtocol::encodeSetSeeedColorSensor);
    m_encodeFuncMap.insert("GetSeeedColorSensor", &DMagicianProtocol::encodeGetSeeedColorSensor);
    m_encodeFuncMap.insert("SetSeeedRGBLed", &DMagicianProtocol::encodeSetSeeedRGBLed);
    m_encodeFuncMap.insert("GetMCUTemperature", &DMagicianProtocol::encodeGetMCUTemperature);

    /* id:240~246 */
    m_encodeFuncMap.insert("QueuedCmdStart", &DMagicianProtocol::encodeSetQueuedCmdStart);
    m_encodeFuncMap.insert("QueuedCmdStop", &DMagicianProtocol::encodeSetQueuedCmdStop);
    m_encodeFuncMap.insert("QueuedCmdForceStop", &DMagicianProtocol::encodeSetQueuedCmdForceStop);
    m_encodeFuncMap.insert("QueuedCmdStartDownload", &DMagicianProtocol::encodeSetQueuedCmdStartDownload);
    m_encodeFuncMap.insert("QueuedCmdStopDownload", &DMagicianProtocol::encodeSetQueuedCmdStopDownload);
    m_encodeFuncMap.insert("QueuedCmdClear", &DMagicianProtocol::encodeSetQueuedCmdClear);
    m_encodeFuncMap.insert("GetQueuedCmdCurrentIndex", &DMagicianProtocol::encodeGetQueuedCmdCurrentIndex);
}

void DMagicianProtocol::_parseFunctionInit()
{
    m_parseFuncMap.insert(0, &DMagicianProtocol::parseDeviceSN);
    m_parseFuncMap.insert(1, &DMagicianProtocol::parseDeviceName);
    m_parseFuncMap.insert(2, &DMagicianProtocol::parseDeviceVersion);
    m_parseFuncMap.insert(3, &DMagicianProtocol::parseDeviceWithL);
    m_parseFuncMap.insert(4, &DMagicianProtocol::parseDeviceTime);
    m_parseFuncMap.insert(5, &DMagicianProtocol::parseDeviceID);
    m_parseFuncMap.insert(6, &DMagicianProtocol::parseDeviceInfo);
    m_parseFuncMap.insert(7, &DMagicianProtocol::parseProductName);
    m_parseFuncMap.insert(8, &DMagicianProtocol::parseOLEDDisplay);
    m_parseFuncMap.insert(9, &DMagicianProtocol::parseProgressBar);

    m_parseFuncMap.insert(10, &DMagicianProtocol::parsePose);
    m_parseFuncMap.insert(11, &DMagicianProtocol::parseResetPose);
    m_parseFuncMap.insert(13, &DMagicianProtocol::parsePoseL);

    m_parseFuncMap.insert(20, &DMagicianProtocol::parseAlarmState);

    m_parseFuncMap.insert(30, &DMagicianProtocol::parseHOMEParams);
    m_parseFuncMap.insert(31, &DMagicianProtocol::parseHOMECmd);
    m_parseFuncMap.insert(32, &DMagicianProtocol::parseAutoLeveling);
    m_parseFuncMap.insert(33, &DMagicianProtocol::parseGoHomeStatus);

    m_parseFuncMap.insert(40, &DMagicianProtocol::parseHHTTrigMode);
    m_parseFuncMap.insert(41, &DMagicianProtocol::parseHHTTrigOutputEnabled);
    m_parseFuncMap.insert(42, &DMagicianProtocol::parseHHTTrigOutput);

    m_parseFuncMap.insert(50, &DMagicianProtocol::parseArmOrientation);
    m_parseFuncMap.insert(51, &DMagicianProtocol::parseMotorMode);

    m_parseFuncMap.insert(60, &DMagicianProtocol::parseEndEffectorParams);
    m_parseFuncMap.insert(61, &DMagicianProtocol::parseEndEffectorLaser);
    m_parseFuncMap.insert(62, &DMagicianProtocol::parseEndEffectorSuctionCup);
    m_parseFuncMap.insert(63, &DMagicianProtocol::parseEndEffectorGripper);
    m_parseFuncMap.insert(64, &DMagicianProtocol::parseEndEffectorType);

    m_parseFuncMap.insert(65, &DMagicianProtocol::parseServoAngle);
    m_parseFuncMap.insert(66, &DMagicianProtocol::parseArmSpeedRatio);
    m_parseFuncMap.insert(67, &DMagicianProtocol::parseLSpeedRatio);
    m_parseFuncMap.insert(68, &DMagicianProtocol::parseConfigAndStatus);
    m_parseFuncMap.insert(69, &DMagicianProtocol::parseRTStatus);

    m_parseFuncMap.insert(70, &DMagicianProtocol::parseJOGJointParams);
    m_parseFuncMap.insert(71, &DMagicianProtocol::parseJOGCoordinateParams);
    m_parseFuncMap.insert(72, &DMagicianProtocol::parseJOGCommonParams);
    m_parseFuncMap.insert(73, &DMagicianProtocol::parseJOGCmd);
    m_parseFuncMap.insert(74, &DMagicianProtocol::parseJOGLParams);

    m_parseFuncMap.insert(80, &DMagicianProtocol::parsePTPJointParams);
    m_parseFuncMap.insert(81, &DMagicianProtocol::parsePTPCoordinateParams);
    m_parseFuncMap.insert(82, &DMagicianProtocol::parsePTPJumpParams);
    m_parseFuncMap.insert(83, &DMagicianProtocol::parsePTPCommonParams);
    m_parseFuncMap.insert(84, &DMagicianProtocol::parsePTPCmd);
    m_parseFuncMap.insert(85, &DMagicianProtocol::parsePTPLParams);
    m_parseFuncMap.insert(86, &DMagicianProtocol::parsePTPWithLCmd);
    m_parseFuncMap.insert(87, &DMagicianProtocol::parsePTPJump2Params);
    m_parseFuncMap.insert(88, &DMagicianProtocol::parsePTPPOCmd);
    m_parseFuncMap.insert(89, &DMagicianProtocol::parsePTPPOWithLCmd);

    m_parseFuncMap.insert(90, &DMagicianProtocol::parseCPParams);
    m_parseFuncMap.insert(91, &DMagicianProtocol::parseCPCmd);
    m_parseFuncMap.insert(92, &DMagicianProtocol::parseCPLECmd);
    m_parseFuncMap.insert(93, &DMagicianProtocol::parseCPRHeadHoldEnable);
    m_parseFuncMap.insert(94, &DMagicianProtocol::parseCPCommonParams);
    m_parseFuncMap.insert(95, &DMagicianProtocol::parseCP2Cmd);

    m_parseFuncMap.insert(100, &DMagicianProtocol::parseARCParams);
    m_parseFuncMap.insert(101, &DMagicianProtocol::parseARCCmd);
    m_parseFuncMap.insert(102, &DMagicianProtocol::parseCircleCmd);
    m_parseFuncMap.insert(103, &DMagicianProtocol::parseARCCommonParams);

    m_parseFuncMap.insert(110, &DMagicianProtocol::parseWAITCmd);

    m_parseFuncMap.insert(120, &DMagicianProtocol::parseTRIGCmd);

    m_parseFuncMap.insert(130, &DMagicianProtocol::parseIOMultiplexing);
    m_parseFuncMap.insert(131, &DMagicianProtocol::parseIODO);
    m_parseFuncMap.insert(132, &DMagicianProtocol::parseIOPWM);
    m_parseFuncMap.insert(133, &DMagicianProtocol::parseIODI);
    m_parseFuncMap.insert(134, &DMagicianProtocol::parseIOADC);
    m_parseFuncMap.insert(135, &DMagicianProtocol::parseEMotor);
    m_parseFuncMap.insert(136, &DMagicianProtocol::parseEMotorS);
    m_parseFuncMap.insert(137, &DMagicianProtocol::parseColorSensor);
    m_parseFuncMap.insert(138, &DMagicianProtocol::parseInfraredSensor);
    m_parseFuncMap.insert(139, &DMagicianProtocol::parseIICInfo);

    m_parseFuncMap.insert(140, &DMagicianProtocol::parseAngleSensorStaticError);
    m_parseFuncMap.insert(141, &DMagicianProtocol::parseAngleSensorCoef);
    m_parseFuncMap.insert(142, &DMagicianProtocol::parseBaseDecoderStaticError);
    m_parseFuncMap.insert(143, &DMagicianProtocol::parseLRHandCalibrateValue);

    m_parseFuncMap.insert(150, &DMagicianProtocol::parseWIFIConfigMode);
    m_parseFuncMap.insert(151, &DMagicianProtocol::parseWIFISSID);
    m_parseFuncMap.insert(152, &DMagicianProtocol::parseWIFIPassword);
    m_parseFuncMap.insert(153, &DMagicianProtocol::parseWIFIIPAddress);
    m_parseFuncMap.insert(154, &DMagicianProtocol::parseWIFINetmask);
    m_parseFuncMap.insert(155, &DMagicianProtocol::parseWIFIGateway);
    m_parseFuncMap.insert(156, &DMagicianProtocol::parseWIFIDNS);
    m_parseFuncMap.insert(157, &DMagicianProtocol::parseWIFIConnectStatus);

    m_parseFuncMap.insert(170, &DMagicianProtocol::parseLostStep);
    m_parseFuncMap.insert(171, &DMagicianProtocol::parseLostStepCmd);
    m_parseFuncMap.insert(172, &DMagicianProtocol::parseCollisionCheck);

    m_parseFuncMap.insert(192, &DMagicianProtocol::parseDeviceStatus);
    m_parseFuncMap.insert(193, &DMagicianProtocol::parseDeviceRunAPP);
    m_parseFuncMap.insert(194, &DMagicianProtocol::parseUpgradeStatus);
    m_parseFuncMap.insert(195, &DMagicianProtocol::parseRunUpgrade);
    m_parseFuncMap.insert(196, &DMagicianProtocol::parseStartTransmit);
    m_parseFuncMap.insert(197, &DMagicianProtocol::parseUpgradeVeify);
    m_parseFuncMap.insert(198, &DMagicianProtocol::parseDeviceRestart);

    m_parseFuncMap.insert(210, &DMagicianProtocol::parseSeeedDistanceSensor);
    m_parseFuncMap.insert(211, &DMagicianProtocol::parseSeeedTempSensor);
    m_parseFuncMap.insert(212, &DMagicianProtocol::parseSeeedLightSensor);
    m_parseFuncMap.insert(213, &DMagicianProtocol::parseSeeedColorSensor);
    m_parseFuncMap.insert(214, &DMagicianProtocol::parseSeeedRGBLed);
    m_parseFuncMap.insert(215, &DMagicianProtocol::parseMCUTemperature);

    m_parseFuncMap.insert(240, &DMagicianProtocol::parseQueuedCmdStart);
    m_parseFuncMap.insert(241, &DMagicianProtocol::parseQueuedCmdStop);
    m_parseFuncMap.insert(242, &DMagicianProtocol::parseQueuedCmdForceStop);
    m_parseFuncMap.insert(243, &DMagicianProtocol::parseQueuedCmdStartDownload);
    m_parseFuncMap.insert(244, &DMagicianProtocol::parseQueuedCmdStopDownload);
    m_parseFuncMap.insert(245, &DMagicianProtocol::parseQueuedCmdClear);
    m_parseFuncMap.insert(246, &DMagicianProtocol::parseQueuedCmdCurrentIndex);
    m_parseFuncMap.insert(247, &DMagicianProtocol::parseQueuedCmdLeftSpace);
    m_parseFuncMap.insert(248, &DMagicianProtocol::parseQueuedCmdMotionFinish);
}

QJsonObject DMagicianProtocol::addQueueIndexInfo(QJsonObject &resObj, QByteArray &params)
{
    if (params.size() == sizeof (quint64)) {
        quint64 queuedCmdIndex = 0;
        memcpy(&queuedCmdIndex, params, sizeof (quint64));

        QJsonObject paramsObj;
        paramsObj.insert("queuedCmdIndex", static_cast<double>(queuedCmdIndex));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

const QStringList DMagicianProtocol::getCommandList()
{
    return m_encodeFuncMap.keys();
}

QJsonObject DMagicianProtocol::parseParams(PacketPayload &payload)
{
    QJsonObject resObj;

    ParseFunction function = m_parseFuncMap.value(payload.p_cmdID);

    if (function) {
        resObj = (this->*function)(payload.p_ctrl.c_rw, payload.p_params);
    } else {
        qDebug() << "No matching parseParams function.";
    }
    return resObj;
}

bool DMagicianProtocol::setPayload(QString cmd, PacketPayload &payload, QJsonObject params)
{
    QByteArray res;

    EncodeFun function = m_encodeFuncMap.value(cmd);
    if (function) {
        (this->*function)(payload, params);
        return true;
    } else {
        qDebug() << "No matching encode function with: " << cmd << " params:" << params;
    }
    return false;
}


/* *** Parse Function *** Parse Function *** Parse Function *** Parse Function *** */
/* *** Parse Function *** Parse Function *** Parse Function *** Parse Function *** */


//![0]
QJsonObject DMagicianProtocol::parseDeviceSN(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetDeviceSN");
    } else {
        resObj.insert("cmd", "SetDeviceSN");
    }

    if (params.size() > 0) {
        char *sn = params.data();

        QJsonObject paramsObj;
        paramsObj.insert("deviceSN", sn);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![1]
QJsonObject DMagicianProtocol::parseDeviceName(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetDeviceName");
    } else {
        resObj.insert("cmd", "SetDeviceName");
    }

    if (params.size() > 0) {
        char *devName = params.data();

        QJsonObject paramsObj;
        paramsObj.insert("deviceName", devName);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![2]
QJsonObject DMagicianProtocol::parseDeviceVersion(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetDeviceVersion");
    }

    if (params.size() > 3) {
        quint8 majorVersion = 0, minorVersion = 0, revision = 0, hwVersion = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> majorVersion >> minorVersion >> revision >> hwVersion;

        QJsonObject paramsObj;
        paramsObj.insert("majorVersion", majorVersion);
        paramsObj.insert("minorVersion", minorVersion);
        paramsObj.insert("revision", revision);
        paramsObj.insert("hwVersion", hwVersion);

        char *releaseTime = params.right(params.size() - 4).data();
        paramsObj.insert("releaseTime", releaseTime);

        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![3]
QJsonObject DMagicianProtocol::parseDeviceWithL(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetDeviceWithL");
    } else {
        resObj.insert("cmd", "SetDeviceWithL");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 isEnabled = 0;
        memcpy(&isEnabled, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("isEnabled", isEnabled > 0 ? true : false);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![4]
QJsonObject DMagicianProtocol::parseDeviceTime(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetDeviceTime");
    }

    if (params.size() == sizeof (quint32)) {
        quint32 gSystick = 0;
        memcpy(&gSystick, params, sizeof (quint32));

        QJsonObject paramsObj;
        paramsObj.insert("gSystick", static_cast<double>(gSystick));

        QTime t = QTime::fromMSecsSinceStartOfDay(static_cast<int>(gSystick));
        paramsObj.insert("passtime", t.toString("hh:mm:ss.z"));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![5]
QJsonObject DMagicianProtocol::parseDeviceID(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetDeviceID");
    }

    if (params.size() == 3 * sizeof (quint32)) {
        QDataStream out(&params, QIODevice::ReadOnly);
        QJsonArray idArrary;
        for (int i = 0; i < 3; ++i) {
            quint8 i_id = 0;
            out >> i_id;
            idArrary.append(i_id);
        }

        QJsonObject paramsObj;
        paramsObj.insert("deviceID", idArrary);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![6]
QJsonObject DMagicianProtocol::parseDeviceInfo(quint8 rw, QByteArray params)
{
#pragma pack(push, 1)
    struct DeviceInfoStruct {
        quint64 runTime;
        quint32 powerOn;
        quint32 powerOff;
    };
#pragma pack(pop)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetDeviceInfo");
    }

    if (params.size() == sizeof (DeviceInfoStruct)) {
        DeviceInfoStruct devInfo;
        memcpy(&devInfo, params, sizeof (DeviceInfoStruct));

        QJsonObject paramsObj;
        paramsObj.insert("deviceRunTime", static_cast<double>(devInfo.runTime));
        paramsObj.insert("devicePowerOn", static_cast<double>(devInfo.powerOn));
        paramsObj.insert("devicePowerOff", static_cast<double>(devInfo.powerOff));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![7]
QJsonObject DMagicianProtocol::parseProductName(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetProductName");
    }

    if (params.size() > 0) {
        char *productName = params.data();

        QJsonObject paramsObj;
        paramsObj.insert("productName", productName);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![8]
QJsonObject DMagicianProtocol::parseOLEDDisplay(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetOLEDDisplay");
    }

    return resObj;
}

//![9]
QJsonObject DMagicianProtocol::parseProgressBar(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetProgressBar");
    }

    return resObj;
}

//![10]
QJsonObject DMagicianProtocol::parsePose(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetPose");
    }

    if (params.size() == sizeof (PoseStruct)) {
        PoseStruct pose;
        memcpy(&pose, params, sizeof (PoseStruct));

        QJsonObject paramsObj;
        paramsObj.insert("x", static_cast<double>(pose.x));
        paramsObj.insert("y", static_cast<double>(pose.y));
        paramsObj.insert("z", static_cast<double>(pose.z));
        paramsObj.insert("r", static_cast<double>(pose.r));

        QJsonArray jointAngleArray;
        for (int i = 0; i < 4; ++i) {
            jointAngleArray.append(static_cast<double>(pose.jointAngle[i]));
        }
        paramsObj.insert("jointAngle", jointAngleArray);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![11]
QJsonObject DMagicianProtocol::parseResetPose(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "ResetPose");
    }
    return resObj;
}

//![13]
QJsonObject DMagicianProtocol::parsePoseL(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetPoseL");
    }

    if (params.size() == sizeof (float)) {
        float positionL;
        memcpy(&positionL, params, sizeof (float));

        QJsonObject paramsObj;
        paramsObj.insert("positionL", static_cast<double>(positionL));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![20]
QJsonObject DMagicianProtocol::parseAlarmState(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetAlarmsState");
    } else {
        resObj.insert("cmd", "ClearAllAlarmsState");
    }

    if (params.size() > 0) {
        QDataStream out(&params, QIODevice::ReadOnly);

        QJsonArray stateArr;
        for (int i = 0; i < params.size(); ++i) {
            quint8 state = 0;
            out >> state;
            stateArr.append(state);
        }

        QJsonObject paramsObj;
        paramsObj.insert("state", stateArr);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![30]
QJsonObject DMagicianProtocol::parseHOMEParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetHOMEParams");
    } else {
        resObj.insert("cmd", "SetHOMEParams");
    }

    if (params.size() == sizeof (PositionStruct)) {
        PositionStruct homePose;
        memcpy(&homePose, params, sizeof (PositionStruct));

        QJsonObject paramsObj;
        paramsObj.insert("x", static_cast<double>(homePose.x));
        paramsObj.insert("y", static_cast<double>(homePose.y));
        paramsObj.insert("z", static_cast<double>(homePose.z));
        paramsObj.insert("r", static_cast<double>(homePose.r));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![31]
QJsonObject DMagicianProtocol::parseHOMECmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetHOMECmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![32]
QJsonObject DMagicianProtocol::parseAutoLeveling(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetAutoLeveling");
    } else {
        resObj.insert("cmd", "SetAutoLeveling");
    }

    if (params.size() == sizeof (float)) {
        float precision;
        memcpy(&precision, params, sizeof (float));

        QJsonObject paramsObj;
        paramsObj.insert("precision", static_cast<double>(precision));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![33]
QJsonObject DMagicianProtocol::parseGoHomeStatus(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetGoHomeStatus");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 isFinished = 0;
        memcpy(&isFinished, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("isFinished", isFinished > 0 ? true : false);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![40]
QJsonObject DMagicianProtocol::parseHHTTrigMode(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetHHTTrigMode");
    } else {
        resObj.insert("cmd", "SetHHTTrigMode");
    }

    if(params.size() > 0){
        quint8 mode = 0;
        memcpy(&mode, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("mode", mode);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![41]
QJsonObject DMagicianProtocol::parseHHTTrigOutputEnabled(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetHHTTrigOutputEnabled");
    } else {
        resObj.insert("cmd", "SetHHTTrigOutputEnabled");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 isEnabled = 0;
        memcpy(&isEnabled, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("isEnabled", isEnabled > 0 ? true : false);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![42]
QJsonObject DMagicianProtocol::parseHHTTrigOutput(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetHHTTrigOutput");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 isTriggered;
        memcpy(&isTriggered, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("isTriggered", isTriggered > 0 ? true : false);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![50]
QJsonObject DMagicianProtocol::parseArmOrientation(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetArmOrientation");
    } else {
        resObj.insert("cmd", "SetArmOrientation");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 armOrientation = 0;
        memcpy(&armOrientation, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("armOrientation", armOrientation);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![51]
QJsonObject DMagicianProtocol::parseMotorMode(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetMotorMode");
    } else {
        resObj.insert("cmd", "SetMotorMode");
    }
    return resObj;
}

//![60]
QJsonObject DMagicianProtocol::parseEndEffectorParams(quint8 rw, QByteArray params)
{
    struct CoordinateOffsetStruct {
        float xOffset;
        float yOffset;
        float zOffset;
    };

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetEndEffectorParams");
    } else {
        resObj.insert("cmd", "SetEndEffectorParams");
    }

    if (params.size() == sizeof (CoordinateOffsetStruct)) {
        CoordinateOffsetStruct coordinateOffset;
        memcpy(&coordinateOffset, params, sizeof (CoordinateOffsetStruct));

        QJsonObject paramsObj;
        paramsObj.insert("xOffset", static_cast<double>(coordinateOffset.xOffset));
        paramsObj.insert("yOffset", static_cast<double>(coordinateOffset.yOffset));
        paramsObj.insert("zOffset", static_cast<double>(coordinateOffset.zOffset));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![61]
QJsonObject DMagicianProtocol::parseEndEffectorLaser(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetEndEffectorLaser");
    } else {
        resObj.insert("cmd", "SetEndEffectorLaser");
    }

    if (params.size() == 2 * sizeof (quint8)) {
        quint8 isEnabled = 0, isOn = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> isEnabled >> isOn;

        QJsonObject paramsObj;
        paramsObj.insert("isEnabled", isEnabled > 0 ? true : false);
        paramsObj.insert("isOn", isOn > 0 ? true : false);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![62]
QJsonObject DMagicianProtocol::parseEndEffectorSuctionCup(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetEndEffectorSuctionCup");
    } else {
        resObj.insert("cmd", "SetEndEffectorSuctionCup");
    }

    if (params.size() == 2 * sizeof (quint8)) {
        quint8 isEnabled = 0, isSuck = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> isEnabled >> isSuck;

        QJsonObject paramsObj;
        paramsObj.insert("isEnabled", isEnabled > 0 ? true : false);
        paramsObj.insert("isOn", isSuck > 0 ? true : false);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![63]
QJsonObject DMagicianProtocol::parseEndEffectorGripper(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetEndEffectorGripper");
    } else {
        resObj.insert("cmd", "SetEndEffectorGripper");
    }

    if (params.size() == 2 * sizeof (quint8)) {
        quint8 isEnabled = 0, isGriped = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> isEnabled >> isGriped;

        QJsonObject paramsObj;
        paramsObj.insert("isEnabled", isEnabled > 0 ? true : false);
        paramsObj.insert("isOn", isGriped > 0 ? true : false);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![64]
QJsonObject DMagicianProtocol::parseEndEffectorType(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetEndEffectorType");
    } else {
        resObj.insert("cmd", "SetEndEffectorType");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 type = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> type;

        QJsonObject paramsObj;
        paramsObj.insert("type", type);
        resObj.insert("params", paramsObj);
    }

    return resObj;
}

//![65]
QJsonObject DMagicianProtocol::parseServoAngle(quint8 rw, QByteArray params)
{
#pragma pack(push, 1)
    struct ServoAngleStruct {
        quint8 index;
        float angle;
    };
#pragma pack(pop)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetServoAngle");
    } else {
        resObj.insert("cmd", "SetServoAngle");
    }

    if (params.size() == sizeof (ServoAngleStruct)) {
        ServoAngleStruct servoAngle;
        memcpy(&servoAngle, params, sizeof (ServoAngleStruct));

        QJsonObject paramsObj;
        paramsObj.insert("index", servoAngle.index);
        paramsObj.insert("angle", static_cast<double>(servoAngle.angle));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![66]
QJsonObject DMagicianProtocol::parseArmSpeedRatio(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetArmSpeedRatio");
    } else {
        resObj.insert("cmd", "SetArmSpeedRatio");
    }

    if (params.size() == 2 * sizeof (quint8)) {
        quint8 motionType = 0, value = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> motionType >> value;

        QJsonObject paramsObj;
        paramsObj.insert("motionType", motionType);
        paramsObj.insert("value", value);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![67]
QJsonObject DMagicianProtocol::parseLSpeedRatio(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetLSpeedRatio");
    } else {
        resObj.insert("cmd", "SetLSpeedRatio");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 value = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> value;

        QJsonObject paramsObj;
        paramsObj.insert("value", value);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![68]
QJsonObject DMagicianProtocol::parseConfigAndStatus(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetConfigAndStatus");
    }

    return resObj;
}

//![69]
QJsonObject DMagicianProtocol::parseRTStatus(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetRTStatus");
    }

    return resObj;
}

//![70]
QJsonObject DMagicianProtocol::parseJOGJointParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetJOGJointParams");
    } else {
        resObj.insert("cmd", "SetJOGJointParams");
    }

    if (params.size() == sizeof (VelocityArrayStruct)) {
        VelocityArrayStruct JOGLParams;
        memcpy(&JOGLParams, params, sizeof (VelocityArrayStruct));

        QJsonArray velocityArray, accelerationArray;
        for (int i = 0; i < 4; ++i) {
            velocityArray.append(static_cast<double>(JOGLParams.velocity[i]));
            accelerationArray.append(static_cast<double>(JOGLParams.acceleration[i]));
        }

        QJsonObject paramsObj;
        paramsObj.insert("velocity", velocityArray);
        paramsObj.insert("acceleration", accelerationArray);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![71]
QJsonObject DMagicianProtocol::parseJOGCoordinateParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetJOGCoordinateParams");
    } else {
        resObj.insert("cmd", "SetJOGCoordinateParams");
    }

    if (params.size() == sizeof (VelocityArrayStruct)) {
        VelocityArrayStruct jogCoordinateParams;
        memcpy(&jogCoordinateParams, params, sizeof (VelocityArrayStruct));

        QJsonArray velocityArray, accelerationArray;
        for (int i = 0; i < 4; ++i) {
            velocityArray.append(static_cast<double>(jogCoordinateParams.velocity[i]));
            accelerationArray.append(static_cast<double>(jogCoordinateParams.acceleration[i]));
        }

        QJsonObject paramsObj;
        paramsObj.insert("velocity", velocityArray);
        paramsObj.insert("acceleration", accelerationArray);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![72]
QJsonObject DMagicianProtocol::parseJOGCommonParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetJOGCommonParams");
    } else {
        resObj.insert("cmd", "SetJOGCommonParams");
    }

    if (params.size() == sizeof (VelocityRatioStruct)) {
        VelocityRatioStruct jogParams;
        memcpy(&jogParams, params, sizeof (VelocityRatioStruct));

        QJsonObject paramsObj;
        paramsObj.insert("velocityRatio", static_cast<double>(jogParams.velocityRatio));
        paramsObj.insert("accelerationRatio", static_cast<double>(jogParams.accelerationRatio));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![73]
QJsonObject DMagicianProtocol::parseJOGCmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetJOGCmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![74]
QJsonObject DMagicianProtocol::parseJOGLParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetJOGLParams");
    } else {
        resObj.insert("cmd", "SetJOGLParams");
    }

    if (params.size() == sizeof (VelocityStruct)) {
        VelocityStruct jogParams;
        memcpy(&jogParams, params, sizeof (VelocityStruct));

        QJsonObject paramsObj;
        paramsObj.insert("velocity", static_cast<double>(jogParams.velocity));
        paramsObj.insert("acceleration", static_cast<double>(jogParams.acceleration));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![80]
QJsonObject DMagicianProtocol::parsePTPJointParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetPTPJointParams");
    } else {
        resObj.insert("cmd", "SetPTPJointParams");
    }

    if (params.size() == sizeof (VelocityArrayStruct)) {
        VelocityArrayStruct ptpJointParams;
        memcpy(&ptpJointParams, params, sizeof (VelocityArrayStruct));

        QJsonArray velocityArray, accelerationArray;
        for(int i = 0; i < 4; i++) {
            velocityArray.append(static_cast<double>(ptpJointParams.velocity[i]));
            accelerationArray.append(static_cast<double>(ptpJointParams.acceleration[i]));
        }

        QJsonObject paramsObj;
        paramsObj.insert("velocity", velocityArray);
        paramsObj.insert("acceleration", accelerationArray);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![81]
QJsonObject DMagicianProtocol::parsePTPCoordinateParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetPTPCoordinateParams");
    } else {
        resObj.insert("cmd", "SetPTPCoordinateParams");
    }

    if (params.size() == sizeof (PTPCoordinateParamsStruct)) {
        PTPCoordinateParamsStruct ptpCoordinateParams;
        memcpy(&ptpCoordinateParams, params, sizeof (PTPCoordinateParamsStruct));

        QJsonObject paramsObj;
        paramsObj.insert("xyzVelocity", static_cast<double>(ptpCoordinateParams.xyzVelocity));
        paramsObj.insert("rVelocity", static_cast<double>(ptpCoordinateParams.rVelocity));
        paramsObj.insert("xyzAcceleration", static_cast<double>(ptpCoordinateParams.xyzAcceleration));
        paramsObj.insert("rAcceleration", static_cast<double>(ptpCoordinateParams.rAcceleration));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![82]
QJsonObject DMagicianProtocol::parsePTPJumpParams(quint8 rw, QByteArray params)
{
    struct PTPJumpParamsStruct {
        float jumpHeight;
        float zLimit;
    };

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetPTPJumpParams");
    } else {
        resObj.insert("cmd", "SetPTPJumpParams");
    }

    if (params.size() == sizeof (PTPJumpParamsStruct)) {
        PTPJumpParamsStruct ptpParams;
        memcpy(&ptpParams, params, sizeof (PTPJumpParamsStruct));

        QJsonObject paramsObj;
        paramsObj.insert("jumpHeight", static_cast<double>(ptpParams.jumpHeight));
        paramsObj.insert("zLimit", static_cast<double>(ptpParams.zLimit));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![83]
QJsonObject DMagicianProtocol::parsePTPCommonParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetPTPCommonParams");
    } else {
        resObj.insert("cmd", "SetPTPCommonParams");
    }

    if (params.size() == sizeof (VelocityRatioStruct)) {
        VelocityRatioStruct ptpParams;
        memcpy(&ptpParams, params, sizeof (VelocityRatioStruct));

        QJsonObject paramsObj;
        paramsObj.insert("velocityRatio", static_cast<double>(ptpParams.velocityRatio));
        paramsObj.insert("accelerationRatio", static_cast<double>(ptpParams.accelerationRatio));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![84]
QJsonObject DMagicianProtocol::parsePTPCmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetPTPCmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![85]
QJsonObject DMagicianProtocol::parsePTPLParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetPTPLParams");
    } else {
        resObj.insert("cmd", "SetPTPLParams");
    }

    if (params.size() == sizeof (VelocityStruct)) {
        VelocityStruct ptpParams;
        memcpy(&ptpParams, params, sizeof (VelocityStruct));

        QJsonObject paramsObj;
        paramsObj.insert("velocity", static_cast<double>(ptpParams.velocity));
        paramsObj.insert("acceleration", static_cast<double>(ptpParams.acceleration));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![86]
QJsonObject DMagicianProtocol::parsePTPWithLCmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetPTPWithLCmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![87]
QJsonObject DMagicianProtocol::parsePTPJump2Params(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetPTPJump2Params");
    } else {
        resObj.insert("cmd", "SetPTPJump2Params");
    }

    if (params.size() == sizeof (PTPJump2ParamsStruct)) {
        PTPJump2ParamsStruct ptpParams;
        memcpy(&ptpParams, params, sizeof (PTPJump2ParamsStruct));

        QJsonObject paramsObj;
        paramsObj.insert("startJumpHeight", static_cast<double>(ptpParams.startJumpHeight));
        paramsObj.insert("endJumpHeight", static_cast<double>(ptpParams.endJumpHeight));
        paramsObj.insert("zLimit", static_cast<double>(ptpParams.zLimit));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![88]
QJsonObject DMagicianProtocol::parsePTPPOCmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetPTPPOCmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![89]
QJsonObject DMagicianProtocol::parsePTPPOWithLCmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetPTPPOWithLCmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![90]
QJsonObject DMagicianProtocol::parseCPParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetCPParams");
    } else {
        resObj.insert("cmd", "SetCPParams");
    }

    if (params.size() == sizeof (CPParamsStruct)) {
        CPParamsStruct cpParams;
        memcpy(&cpParams, params, sizeof (CPParamsStruct));

        QJsonObject paramsObj;
        paramsObj.insert("targetAcc", static_cast<double>(cpParams.targetAcc));
        paramsObj.insert("junctionVel", static_cast<double>(cpParams.junctionVel));

        if (cpParams.realTimeTrack > 0) {
            paramsObj.insert("period", static_cast<double>(cpParams.acc));
            paramsObj.insert("isRealTimeTrack", static_cast<quint8>(cpParams.realTimeTrack));
        } else {
            paramsObj.insert("acc", static_cast<double>(cpParams.acc));
            paramsObj.insert("isRealTimeTrack", static_cast<quint8>(cpParams.realTimeTrack));
        }
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![91]
QJsonObject DMagicianProtocol::parseCPCmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetCPCmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![92]
QJsonObject DMagicianProtocol::parseCPLECmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetCPLECmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![93]
QJsonObject DMagicianProtocol::parseCPRHeadHoldEnable(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetCPRHoldEnable");
    } else {
        resObj.insert("cmd", "SetCPRHoldEnable");
    }
    return resObj;
}

//![94]
QJsonObject DMagicianProtocol::parseCPCommonParams(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetCPCommonParams");
    } else {
        resObj.insert("cmd", "SetCPCommonParams");
    }
    return resObj;
}

//![95]
QJsonObject DMagicianProtocol::parseCP2Cmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetCP2Cmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![100]
QJsonObject DMagicianProtocol::parseARCParams(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetARCParams");
    } else {
        resObj.insert("cmd", "SetARCParams");
    }

    if (params.size() == sizeof (ARCParamsStruct)) {
        ARCParamsStruct arcParams;
        memcpy(&arcParams, params, sizeof (ARCParamsStruct));

        QJsonObject paramsObj;
        paramsObj.insert("xyzVelocity", static_cast<double>(arcParams.xyzVelocity));
        paramsObj.insert("rVelocity", static_cast<double>(arcParams.rVelocity));
        paramsObj.insert("xyzAcceleration", static_cast<double>(arcParams.xyzAcceleration));
        paramsObj.insert("rAcceleration", static_cast<double>(arcParams.rAcceleration));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![101]
QJsonObject DMagicianProtocol::parseARCCmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetARCCmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![102]
QJsonObject DMagicianProtocol::parseCircleCmd(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetCircleCmd");
    }
    return resObj;
}

//![103]
QJsonObject DMagicianProtocol::parseARCCommonParams(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetARCCommonParams");
    } else {
        resObj.insert("cmd", "SetARCCommonParams");
    }
    return resObj;
}

//![110]
QJsonObject DMagicianProtocol::parseWAITCmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetWAITCmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![120]
QJsonObject DMagicianProtocol::parseTRIGCmd(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetTRIGCmd");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![130]
QJsonObject DMagicianProtocol::parseIOMultiplexing(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetIOMultiplexing");
    } else {
        resObj.insert("cmd", "SetIOMultiplexing");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 port = 0;
        memcpy(&port, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("port", port);
        resObj.insert("params", paramsObj);
    } else if (params.size() == 2 * sizeof (quint8)) {
        quint8 port = 0, multiplex = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> port >> multiplex;

        QJsonObject paramsObj;
        paramsObj.insert("port", port);
        paramsObj.insert("multiplex", multiplex);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![131]
QJsonObject DMagicianProtocol::parseIODO(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetIODO");
    } else {
        resObj.insert("cmd", "SetIODO");
    }

    if (params.size() == 2 * sizeof (quint8)) {
        quint8 port = 0, level = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> port >> level;

        QJsonObject paramsObj;
        paramsObj.insert("port", port);
        paramsObj.insert("level", level);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![132]
QJsonObject DMagicianProtocol::parseIOPWM(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetIOPWM");
    } else {
        resObj.insert("cmd", "SetIOPWM");
    }

    if (params.size() == sizeof (IOPWMStruct)) {
        IOPWMStruct iopwm;
        memcpy(&iopwm, params, sizeof (IOPWMStruct));

        QJsonObject paramsObj;
        paramsObj.insert("port", iopwm.port);
        paramsObj.insert("dutyCycle", static_cast<double>(iopwm.dutyCycle));
        paramsObj.insert("frequency", static_cast<double>(iopwm.frequency));
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![133]
QJsonObject DMagicianProtocol::parseIODI(quint8 rw, QByteArray params)
{
    QJsonObject resObj; 

    if (rw == 0) {
        resObj.insert("cmd", "GetIODI");
    }

    if (params.size() == 2 * sizeof (quint8)) {
        quint8 port = 0, level = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> port >> level;

        QJsonObject paramsObj;
        paramsObj.insert("port", port);
        paramsObj.insert("level", level);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![134]
QJsonObject DMagicianProtocol::parseIOADC(quint8 rw, QByteArray params)
{
#pragma pack(push, 1)
    struct IOADCStruct {
        quint8 port;
        quint16 value;
    };
#pragma pack(pop)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetIOADC");
    }

    if (params.size() == sizeof (IOADCStruct)) {
        IOADCStruct ioadc;
        memcpy(&ioadc, params, sizeof (IOADCStruct));

        QJsonObject paramsObj;
        paramsObj.insert("port", ioadc.port);
        paramsObj.insert("value", ioadc.value);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![135]
QJsonObject DMagicianProtocol::parseEMotor(quint8 rw, QByteArray params)
{
    QJsonObject resObj;
    QJsonObject paramsObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetEMotor");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![136]
QJsonObject DMagicianProtocol::parseEMotorS(quint8 rw, QByteArray params)
{
    QJsonObject resObj;
    QJsonObject paramsObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetEMotorS");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![137]
QJsonObject DMagicianProtocol::parseColorSensor(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetColorSensor");
    } else {
        resObj.insert("cmd", "SetColorSensor");
    }

    if (params.size() == sizeof (ColorStruct)) {
        ColorStruct color;
        memcpy(&color, params, sizeof (ColorStruct));

        QJsonObject paramsObj;
        paramsObj.insert("red", color.red);
        paramsObj.insert("green", color.green);
        paramsObj.insert("blue", color.blue);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![138]
QJsonObject DMagicianProtocol::parseInfraredSensor(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetInfraredSensor");
    } else {
        resObj.insert("cmd", "SetInfraredSensor");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 status = 0;
        memcpy(&status, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("status", status);
        resObj.insert("params", paramsObj);
    } else if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![139]
QJsonObject DMagicianProtocol::parseIICInfo(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetIICInfo");
    } else {
        resObj.insert("cmd", "SetIICInfo");
    }

    return resObj;
}

//![140]
QJsonObject DMagicianProtocol::parseAngleSensorStaticError(quint8 rw, QByteArray params)
{
    struct AngleSensorErrorStruct {
        float rearArmAngleError;
        float frontArmAngleError;
    };

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetAngleSensorStaticError");
    } else {
        resObj.insert("cmd", "SetAngleSensorStaticError");
    }

    if (params.size() == sizeof (AngleSensorErrorStruct)) {
        AngleSensorErrorStruct angleParams;
        memcpy(&angleParams, params, sizeof (AngleSensorErrorStruct));

        QJsonObject paramsObj;
        paramsObj.insert("rearArmAngleError", static_cast<double>(angleParams.rearArmAngleError));
        paramsObj.insert("frontArmAngleError", static_cast<double>(angleParams.frontArmAngleError));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![141]
QJsonObject DMagicianProtocol::parseAngleSensorCoef(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetAngleSensorCoef");
    } else {
        resObj.insert("cmd", "SetAngleSensorCoef");
    }
    return resObj;
}

//![142]
QJsonObject DMagicianProtocol::parseBaseDecoderStaticError(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "SetBaseDecoderStaticError");
    } else {
        resObj.insert("cmd", "GetBaseDecoderStaticError");
    }
    return resObj;
}

//![143]
QJsonObject DMagicianProtocol::parseLRHandCalibrateValue(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetLRHandCalibrateValue");
    } else {
        resObj.insert("cmd", "SetLRHandCalibrateValue");
    }
    return resObj;
}

//![150]
QJsonObject DMagicianProtocol::parseWIFIConfigMode(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetWIFIConfigMode");
    } else {
        resObj.insert("cmd", "SetWIFIConfigMode");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 isEnable = 0;
        memcpy(&isEnable, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("enable", isEnable > 0 ? true : false);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![151]
QJsonObject DMagicianProtocol::parseWIFISSID(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetWIFISSID");
    } else {
        resObj.insert("cmd", "SetWIFISSID");
    }

    if (params.size() > 0) {
        char* ssid = params.data();

        QJsonObject paramsObj;
        paramsObj.insert("ssid", ssid);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![152]
QJsonObject DMagicianProtocol::parseWIFIPassword(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetWIFIPassword");
    } else {
        resObj.insert("cmd", "SetWIFIPassword");
    }

    if (params.size() > 0) {
        char* password = params.data();

        QJsonObject paramsObj;
        paramsObj.insert("password", password);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![153]
QJsonObject DMagicianProtocol::parseWIFIIPAddress(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetWIFIIPAddress");     
    } else {
        resObj.insert("cmd", "SetWIFIIPAddress");
    }

    if (params.size() == sizeof (WIFIIPAddressStruct)) {
        WIFIIPAddressStruct wifiIpAddrParams;
        memcpy(&wifiIpAddrParams, params, sizeof (WIFIIPAddressStruct));

        QJsonArray wifiIpAddrParamsArray;
        for(int i = 0; i < 4; i++) {
            wifiIpAddrParamsArray.append(static_cast<double>(wifiIpAddrParams.address[i]));
        }

        QJsonObject paramsObj;
        paramsObj.insert("address", wifiIpAddrParamsArray);
        paramsObj.insert("dhcp", wifiIpAddrParams.dhcp);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![154]
QJsonObject DMagicianProtocol::parseWIFINetmask(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetWIFINetmask");
    } else {
        resObj.insert("cmd", "SetWIFINetmask");
    }

    if (params.size() == sizeof (WifiAddressStruct)) {
        WifiAddressStruct wifiNetmask;
        memcpy(&wifiNetmask, params, sizeof (WifiAddressStruct));

        QJsonArray wifiNetmaskParamsArray;
        for(int i = 0; i < 4; i++) {
            wifiNetmaskParamsArray.append(static_cast<double>(wifiNetmask.address[i]));
        }

        QJsonObject paramsObj;
        paramsObj.insert("address", wifiNetmaskParamsArray);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![155]
QJsonObject DMagicianProtocol::parseWIFIGateway(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetWIFIGateway"); 
    } else {
        resObj.insert("cmd", "SetWIFIGateway");
    }

    if (params.size() == sizeof (WifiAddressStruct)) {
        WifiAddressStruct wifiGateWay;
        memcpy(&wifiGateWay, params, sizeof (WifiAddressStruct));

        QJsonArray wifiGateWayArray;
        for(int i = 0; i < 4; i++) {
            wifiGateWayArray.append(static_cast<double>(wifiGateWay.address[i]));
        }

        QJsonObject paramsObj;
        paramsObj.insert("address", wifiGateWayArray);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![156]
QJsonObject DMagicianProtocol::parseWIFIDNS(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetWIFIDNS");
    } else {
        resObj.insert("cmd", "SetWIFIDNS");
    }

    if (params.size() == sizeof (WifiAddressStruct)) {
        WifiAddressStruct wifiDns;
        memcpy(&wifiDns, params, sizeof (WifiAddressStruct));

        QJsonArray wifiDnsArray;
        for(int i = 0; i < 4; i++) {
            wifiDnsArray.append(static_cast<double>(wifiDns.address[i]));
        }

        QJsonObject paramsObj;
        paramsObj.insert("addr", wifiDnsArray);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![157]
QJsonObject DMagicianProtocol::parseWIFIConnectStatus(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetWIFIConnectStatus");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 isConnected = 0;
        memcpy(&isConnected, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("isConnected", isConnected);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![170]
QJsonObject DMagicianProtocol::parseLostStep(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetLostStepParams");
    }
    return resObj;
}

//![171]
QJsonObject DMagicianProtocol::parseLostStepCmd(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetLostStepCmd");
    }
    return resObj;
}

//![172]
QJsonObject DMagicianProtocol::parseCollisionCheck(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetCollisionCheck");
    } else {
        resObj.insert("cmd", "SetCollisionCheck");
    }

    if (params.size() == sizeof (CollisionCheckStruct)) {
        CollisionCheckStruct collision;
        memcpy(&collision, params, sizeof (CollisionCheckStruct));

        QJsonObject paramsObj;
        paramsObj.insert("isEnabled", collision.enable > 0 ? true : false);
        paramsObj.insert("threshold", static_cast<double>(collision.threshold));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![192]
QJsonObject DMagicianProtocol::parseDeviceStatus(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetDeviceStatus");
    } else {
        resObj.insert("cmd", "SetDeviceStatus");
    }
    return resObj;
}

//![193]
QJsonObject DMagicianProtocol::parseDeviceRunAPP(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetDeviceRunAPP");
    } else {
        resObj.insert("cmd", "SetDeviceRunAPP");
    }
    return resObj;
}

//![194]
QJsonObject DMagicianProtocol::parseUpgradeStatus(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetUpgradeStatus");
    } else {
        resObj.insert("cmd", "SetUpgradeStatus");
    }
    if (params.size() == sizeof (quint8)) {
        quint8 latest;
        memcpy(&latest, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("latest", latest > 0 ? true : false);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![195]
QJsonObject DMagicianProtocol::parseRunUpgrade(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetRunUpgrade");
    } else {
        resObj.insert("cmd", "SetRunUpgrade");
    }
    return resObj;
}

//![196]
QJsonObject DMagicianProtocol::parseStartTransmit(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetStartTransmit");
    } else {
        resObj.insert("cmd", "SetStartTransmit");
    }
    return resObj;
}

//![197]
QJsonObject DMagicianProtocol::parseUpgradeVeify(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetUpgradeVeify");
    } else {
        resObj.insert("cmd", "SetUpgradeVeify");
    }
    return resObj;
}

//![198]
QJsonObject DMagicianProtocol::parseDeviceRestart(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetRestartDeviceCmd");
    }

    return resObj;
}

//![210]
QJsonObject DMagicianProtocol::parseSeeedDistanceSensor(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetSeeedDistanceSensor");
    }

    if (params.size() == sizeof (quint8)) {
        quint8 distance = 0;
        memcpy(&distance, params, sizeof (quint8));

        QJsonObject paramsObj;
        paramsObj.insert("distance", distance);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![211]
QJsonObject DMagicianProtocol::parseSeeedTempSensor(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetSeeedTempSensor");
    } else {
        resObj.insert("cmd", "SetSeeedTempSensor");
    }

    if (params.size() == 2 * sizeof (quint8)) {
        quint8 temperature = 0, humidity = 0;
        QDataStream out(&params, QIODevice::ReadOnly);
        out >> temperature >> humidity;

        QJsonObject paramsObj;
        paramsObj.insert("temperature", temperature);
        paramsObj.insert("humidity", humidity);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![212]
QJsonObject DMagicianProtocol::parseSeeedLightSensor(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetSeeedLightSensor");
    } else {
        resObj.insert("cmd", "SetSeeedLightSensor");
    }

    if (params.size() == sizeof (quint32)) {
        quint32 intensity = 0;
        memcpy(&intensity, params, sizeof (quint32));

        QJsonObject paramsObj;
        paramsObj.insert("intensity", static_cast<double>(intensity));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![213]
QJsonObject DMagicianProtocol::parseSeeedColorSensor(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetSeeedColorSensor");
    } else {
        resObj.insert("cmd", "SetSeeedColorSensor");
    }

    if (params.size() == sizeof (SeeedColorStruct)) {
        SeeedColorStruct color;
        memcpy(&color, params, sizeof (SeeedColorStruct));

        QJsonObject paramsObj;
        paramsObj.insert("red", color.red);
        paramsObj.insert("green", color.green);
        paramsObj.insert("blue", color.blue);
        paramsObj.insert("cct", color.cct);
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![214]
QJsonObject DMagicianProtocol::parseSeeedRGBLed(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "SetSeeedRGBLed");
    }

    return resObj;
}

//![215]
QJsonObject DMagicianProtocol::parseMCUTemperature(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetMCUTemperature");
    }

    return resObj;
}

//![240]
QJsonObject DMagicianProtocol::parseQueuedCmdStart(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "QueuedCmdStart");
    }
    return resObj;
}

//![241]
QJsonObject DMagicianProtocol::parseQueuedCmdStop(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "QueuedCmdStop");
    }
    return resObj;
}

//![242]
QJsonObject DMagicianProtocol::parseQueuedCmdForceStop(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "QueuedCmdForceStop");
    }
    return resObj;
}

//![243]
QJsonObject DMagicianProtocol::parseQueuedCmdStartDownload(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "QueuedCmdStartDownload");
    }
    return resObj;
}

//![244]
QJsonObject DMagicianProtocol::parseQueuedCmdStopDownload(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "QueuedCmdStopDownload");
    }
    return resObj;
}

//![245]
QJsonObject DMagicianProtocol::parseQueuedCmdClear(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 1) {
        resObj.insert("cmd", "QueuedCmdClear");
    }
    return resObj;
}

//![246]
QJsonObject DMagicianProtocol::parseQueuedCmdCurrentIndex(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetQueuedCmdCurrentIndex");
    }

    if (params.size() == sizeof (quint64)) {
        addQueueIndexInfo(resObj, params);
    }
    return resObj;
}

//![247]
QJsonObject DMagicianProtocol::parseQueuedCmdLeftSpace(quint8 rw, QByteArray params)
{
    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetQueuedCmdLeftSpace");
    }

    if (params.size() == sizeof (quint32)) {
        quint32 leftSpace = 0;
        memcpy(&leftSpace, params, sizeof (quint32));

        QJsonObject paramsObj;
        paramsObj.insert("leftSpace", static_cast<double>(leftSpace));
        resObj.insert("params", paramsObj);
    }
    return resObj;
}

//![248]
QJsonObject DMagicianProtocol::parseQueuedCmdMotionFinish(quint8 rw, QByteArray params)
{
    Q_UNUSED(params)

    QJsonObject resObj;

    if (rw == 0) {
        resObj.insert("cmd", "GetQueuedCmdMotionFinish");
    }
    return resObj;
}


/**********************************************************************************
 * *** encode *** encode *** encode *** encode *** encode *** encode *** encode ***
 *********************************************************************************/


/* 设备信息 */
//! [0]
void DMagicianProtocol::encodeSetDeviceSN(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 0;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("deviceSN")) {
        qDebug() << "'deviceSN':missing, use ''";
    } else if (!params.value("deviceSN").isString()) {
        qDebug() << "'deviceSN':type error";
    }

    QString DeviceSN = params.value("deviceSN").toString();
    payload.p_params = DeviceSN.toUtf8();   
}

void DMagicianProtocol::encodeGetDeviceSN(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 0;
    payload.p_ctrl.c_rw = 0;
}

//! [1]
void DMagicianProtocol::encodeSetDeviceName(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 1;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("deviceName")) {
        qDebug() << "'deviceName':missing, use ''";
    } else if (!params.value("deviceName").isString()) {
        qWarning() << "'deviceName':type error";
    }

    QString DeviceName = params.value("deviceName").toString();
    payload.p_params = DeviceName.toUtf8();
}

void DMagicianProtocol::encodeGetDeviceName(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 1;
    payload.p_ctrl.c_rw = 0;
}

//! [2]
void DMagicianProtocol::encodeGetDeviceVersion(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 2;
    payload.p_ctrl.c_rw = 0;
}

//! [3]
void DMagicianProtocol::encodeSetDeviceWithL(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 3;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("version")) {
        qDebug() << "'version':missing, use (0)";
    } else if (!params.value("version").isDouble()) {
        qWarning() << "'version':type error";
    }

    quint8 enable = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&enable), sizeof (quint8));

    quint8 version = static_cast<quint8>(params.value("version").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&version), sizeof (quint8));
}

void DMagicianProtocol::encodeGetDeviceWithL(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 3;
    payload.p_ctrl.c_rw = 0;
}

//! [4]
void DMagicianProtocol::encodeGetDeviceTime(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 4;
    payload.p_ctrl.c_rw = 0;
}

//! [5]
void DMagicianProtocol::encodeGetDeviceID(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 5;
    payload.p_ctrl.c_rw = 0;
}

//! [7]
void DMagicianProtocol::encodeGetProductName(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 7;
    payload.p_ctrl.c_rw = 0;
}

//! [8]
void DMagicianProtocol::encodeSetOLEDDisplay(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 8;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("text")) {
        qDebug() << "'text':missing, use ''";
    } else if (!params.value("text").isString()) {
        qWarning() << "'text':type error";
    }

    QString text = params.value("text").toString();
    payload.p_params = text.toUtf8();
}

void DMagicianProtocol::encodeSetProgressBar(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 9;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("value")) {
        qDebug() << "'value':missing, use (0)";
    } else if (!params.value("value").isDouble()) {
        qWarning() << "'value':type error";
    }

    quint8 value = static_cast<quint8>(params.value("value").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&value), sizeof (quint8));
}

/* 实时位姿 */
//! [10]
void DMagicianProtocol::encodeGetPose(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 10;
    payload.p_ctrl.c_rw = 0;
}

//! [11]
void DMagicianProtocol::encodeResetPose(PacketPayload &payload, QJsonObject params)
{
#pragma pack(push, 1)
    struct ResetPoseStruct {
        quint8 manual;
        float rearArmAngle;
        float frontArmAngle;
    };
#pragma pack(pop)

    payload.p_cmdID = 11;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("manual")) {
        qDebug() << "'manual':missing, use (0)";
    } else if (!params.value("manual").isDouble()) {
        qWarning() << "'manual':type error";
    }
    if (!params.contains("rearArmAngle")) {
        qDebug() << "'rearArmAngle':missing, use (0.0)";
    } else if (!params.value("rearArmAngle").isDouble()) {
        qWarning() << "'rearArmAngle':type error";
    }
    if (!params.contains("frontArmAngle")) {
        qDebug() << "'frontArmAngle':missing, use (0.0)";
    } else if (!params.value("frontArmAngle").isDouble()) {
        qWarning() << "'frontArmAngle':type error";
    }

    ResetPoseStruct resetpose;
    resetpose.manual = static_cast<quint8>(params.value("manual").toInt());
    resetpose.rearArmAngle = static_cast<float>(params.value("rearArmAngle").toDouble());
    resetpose.frontArmAngle = static_cast<float>(params.value("frontArmAngle").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&resetpose), sizeof (ResetPoseStruct));
}

//! [13]
void DMagicianProtocol::encodeGetPoseL(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 13;
    payload.p_ctrl.c_rw = 0;
}

/* 报警功能 */
//! [20]
void DMagicianProtocol::encodeGetAlarmsState(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 20;
    payload.p_ctrl.c_rw = 0;
}

void DMagicianProtocol::encodeClearAllAlarmsState(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 20;
    payload.p_ctrl.c_rw = 1;
}

/* 回零 */
//! [30]
void DMagicianProtocol::encodeSetHOMEParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 30;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("x")) {
        qDebug() << "'x':missing, use (0.0)";
    } else if (!params.value("x").isDouble()) {
        qWarning() << "'x':type error";
    }
    if (!params.contains("y")) {
        qDebug() << "'y':missing, use (0.0)";
    } else if (!params.value("y").isDouble()) {
        qWarning() << "'y':type error";
    }
    if (!params.contains("z")) {
        qDebug() << "'z':missing, use (0.0)";
    } else if (!params.value("z").isDouble()) {
        qWarning() << "'z':type error";
    }
    if (!params.contains("r")) {
        qDebug() << "'r':missing, use (0.0)";
    } else if (!params.value("r").isDouble()) {
        qWarning() << "'r':type error";
    }

    PositionStruct homePose;
    homePose.x = static_cast<float>(params.value("x").toDouble());
    homePose.y = static_cast<float>(params.value("y").toDouble());
    homePose.z = static_cast<float>(params.value("z").toDouble());
    homePose.r = static_cast<float>(params.value("r").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&homePose), sizeof (PositionStruct));
}

void DMagicianProtocol::encodeGetHOMEParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 30;
    payload.p_ctrl.c_rw = 0;
}

//! [31]
void DMagicianProtocol::encodeSetHOMECmd(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 31;
    payload.p_ctrl.c_rw = 1;

#if 0
    quint32 temp = 0;
    payload.p_params.append(reinterpret_cast<char *>(&temp), sizeof (quint32));
#endif
}

//! [32]
void DMagicianProtocol::encodeSetAutoLeveling(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 32;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("precision")) {
        qDebug() << "'precision':missing, use (0.0)";
    } else if (!params.value("precision").isDouble()) {
        qWarning() << "'precision':type error";
    }

    quint8 enable = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&enable), sizeof (quint8));

    float precision = static_cast<float>(params.value("precision").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&precision), sizeof (float));
}

void DMagicianProtocol::encodeGetAutoLeveling(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 32;
    payload.p_ctrl.c_rw = 0;
}

//! [33]
void DMagicianProtocol::encodeGetGoHomeStatus(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 33;
    payload.p_ctrl.c_rw = 0;
}

//! [40]
void DMagicianProtocol::encodeSetHHTTrigMode(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 40;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("mode")) {
        qDebug() << "'mode':missing, use (0)";
    } else if (!params.value("mode").isDouble()) {
        qWarning() << "'mode':type error";
    }

    quint8 mode = static_cast<quint8>(params.value("mode").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&mode), sizeof (quint8));
}

void DMagicianProtocol::encodeGetHHTTrigMode(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 40;
    payload.p_ctrl.c_rw = 0;
}

//! [41]
void DMagicianProtocol::encodeSetHHTTrigOutputEnabled(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 41;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }

    quint8 enable = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&enable), sizeof (quint8));
}

void DMagicianProtocol::encodeGetHHTTrigOutputEnabled(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 41;
    payload.p_ctrl.c_rw = 0;
}

//! [42]
void DMagicianProtocol::encodeGetHHTTrigOutput(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 42;
    payload.p_ctrl.c_rw = 0;
}

//! [60]
void DMagicianProtocol::encodeSetEndEffectorParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 60;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("xOffset")) {
        qDebug() << "'xOffset':missing, use (0.0)";
    } else if (!params.value("xOffset").isDouble()) {
        qWarning() << "'xOffset':type error";
    }
    if (!params.contains("yOffset")) {
        qDebug() << "'yOffset':missing, use (0.0)";
    } else if (!params.value("yOffset").isDouble()) {
        qWarning() << "'yOffset':type error";
    }
    if (!params.contains("zOffset")) {
        qDebug() << "'zOffset':missing, use (0.0)";
    } else if (!params.value("zOffset").isDouble()) {
        qWarning() << "'zOffset':type error";
    }

    float xOffset = static_cast<float>(params.value("xOffset").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&xOffset), sizeof (float));

    float yOffset = static_cast<float>(params.value("yOffset").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&yOffset), sizeof (float));

    float zOffset = static_cast<float>(params.value("zOffset").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&zOffset), sizeof (float));
}

void DMagicianProtocol::encodeGetEndEffectorParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 60;
    payload.p_ctrl.c_rw = 0;
}

//! [61]
void DMagicianProtocol::encodeSetEndEffectorLaser(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 61;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("on")) {
        qDebug() << "'on':missing, use (false)";
    } else if (!params.value("on").isBool()) {
        qWarning() << "'on':type error";
    }

    quint8 enable = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&enable), sizeof (quint8));

    quint8 on = params.value("on").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&on), sizeof (quint8));
}

void DMagicianProtocol::encodeGetEndEffectorLaser(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 61;
    payload.p_ctrl.c_rw = 0;
}

//! [62]
void DMagicianProtocol::encodeSetEndEffectorSuctionCup(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 62;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("on")) {
        qDebug() << "'on':missing, use (false)";
    } else if (!params.value("on").isBool()) {
        qWarning() << "'on':type error";
    }

    quint8 enable = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&enable), sizeof (quint8));

    quint8 suck = params.value("on").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&suck), sizeof (quint8));
}

void DMagicianProtocol::encodeGetEndEffectorSuctionCup(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 62;
    payload.p_ctrl.c_rw = 0;
}

//! [63]
void DMagicianProtocol::encodeSetEndEffectorGripper(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 63;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("on")) {
        qDebug() << "'on':missing, use (false)";
    } else if (!params.value("on").isBool()) {
        qWarning() << "'on':type error";
    }

    quint8 enable = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&enable), sizeof (quint8));

    quint8 grip = params.value("on").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&grip), sizeof (quint8));
}

void DMagicianProtocol::encodeGetEndEffectorGripper(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 63;
    payload.p_ctrl.c_rw = 0;
}

//! [64]
void DMagicianProtocol::encodeSetEndEffectorType(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 64;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("type")) {
        qDebug() << "'type':missing, use (0)";
    } else if (!params.value("type").isDouble()) {
        qWarning() << "'type':type error";
    }

    quint8 type = static_cast<quint8>(params.value("type").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&type), sizeof (quint8));
}

void DMagicianProtocol::encodeGetEndEffectorType(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 64;
    payload.p_ctrl.c_rw = 0;
}

//! [65]
void DMagicianProtocol::encodeSetServoAngle(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 65;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("index")) {
        qDebug() << "'index':missing, use (0)";
    } else if (!params.value("index").isDouble()) {
        qWarning() << "'index':type error";
    }
    if (!params.contains("value")) {
        qDebug() << "'value':missing, use (0.0)";
    } else if (!params.value("value").isDouble()) {
        qWarning() << "'value':type error";
    }

    quint8 index = static_cast<quint8>(params.value("index").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&index), sizeof (quint8));

    float angle = static_cast<float>(params.value("value").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&angle), sizeof (float));
}

void DMagicianProtocol::encodeGetServoAngle(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 65;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("index")) {
        qDebug() << "'index':missing, use (0)";
    } else if (!params.value("index").isDouble()) {
        qWarning() << "'index':type error";
    }

    quint8 index = static_cast<quint8>(params.value("index").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&index), sizeof (quint8));
}

//! [66]
void DMagicianProtocol::encodeSetArmSpeedRatio(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 66;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("value")) {
        qDebug() << "'value':missing, use (0)";
    } else if (!params.value("value").isDouble()) {
        qWarning() << "'value':type error";
    }
    if (!params.contains("motionType")) {
        qDebug() << "'motionType':missing, use (0)";
    } else if (!params.value("motionType").isDouble()) {
        qWarning() << "'motionType':type error";
    }

    quint8 type = static_cast<quint8>(params.value("motionType").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&type), sizeof (quint8));

    quint8 value = static_cast<quint8>(params.value("value").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&value), sizeof (quint8));
}

void DMagicianProtocol::encodeGetArmSpeedRatio(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 66;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("motionType")) {
        qDebug() << "'motionType':missing, use (0)";
    } else if (!params.value("motionType").isDouble()) {
        qWarning() << "'motionType':type error";
    }

    quint8 type = static_cast<quint8>(params.value("motionType").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&type), sizeof (quint8));
}

//! [67]
void DMagicianProtocol::encodeSetLSpeedRatio(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 67;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("value")) {
        qDebug() << "'value':missing, use (0)";
    } else if (!params.value("value").isDouble()) {
        qWarning() << "'value':type error";
    }
    if (!params.contains("motionType")) {
        qDebug() << "'motionType':missing, use (0)";
    } else if (!params.value("motionType").isDouble()) {
        qWarning() << "'motionType':type error";
    }

    quint8 value = static_cast<quint8>(params.value("value").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&value), sizeof (quint8));

    quint8 type = static_cast<quint8>(params.value("motionType").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&type), sizeof (quint8));
}

void DMagicianProtocol::encodeGetLSpeedRatio(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 67;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("motionType")) {
        qDebug() << "'motionType':missing, use (0)";
    } else if (!params.value("motionType").isDouble()) {
        qWarning() << "'motionType':type error";
    }

    quint8 type = static_cast<quint8>(params.value("motionType").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&type), sizeof (quint8));
}

//! [68]
void DMagicianProtocol::encodeGetConfigAndStatus(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 68;
    payload.p_ctrl.c_rw = 0;
}

//! [69]
void DMagicianProtocol::encodeGetRTStatus(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 69;
    payload.p_ctrl.c_rw = 0;
}

//! [70]
void DMagicianProtocol::encodeSetJOGJointParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 70;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("velocity")) {
        qDebug() << "'velocity':missing";
    } else if (!params.value("velocity").isArray()) {
        qWarning() << "'velocity':type error";
    }
    if (!params.contains("acceleration")) {
        qDebug() << "'acceleration':missing";
    } else if (!params.value("acceleration").isArray()) {
        qWarning() << "'acceleration':type error";
    }

    QJsonArray velocityArr = params.value("velocity").toArray();
    QJsonArray accelerationArr = params.value("acceleration").toArray();

    if (velocityArr.count() >= 4 and accelerationArr.count() >= 4) {
        VelocityArrayStruct jogParams;
        for(int i = 0; i < 4; i++) {
            jogParams.velocity[i] = static_cast<float>(velocityArr.at(i).toDouble());
            jogParams.acceleration[i] = static_cast<float>(accelerationArr.at(i).toDouble());
        }
        payload.p_params.append(reinterpret_cast<char *>(&jogParams), sizeof (VelocityArrayStruct));
    } else {
        qDebug() << "invalid params.";
    }
}

void DMagicianProtocol::encodeGetJOGJointParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 70;
    payload.p_ctrl.c_rw = 0;
}

//! [71]
void DMagicianProtocol::encodeSetJOGCoordinateParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 71;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("velocity")) {
        qDebug() << "'velocity':missing";
    } else if (!params.value("velocity").isArray()) {
        qWarning() << "'velocity':type error";
    }
    if (!params.contains("acceleration")) {
        qDebug() << "'acceleration':missing";
    } else if (!params.value("acceleration").isArray()) {
        qWarning() << "'acceleration':type error";
    }

    QJsonArray velocityArr = params.value("velocity").toArray();
    QJsonArray accelerationArr = params.value("acceleration").toArray();

    if (velocityArr.count() >= 4 && accelerationArr.count() >= 4) {
        VelocityArrayStruct jogParams;
        for(int i = 0; i < 4; i++) {
            jogParams.velocity[i] = static_cast<float>(velocityArr.at(i).toDouble());
            jogParams.acceleration[i] = static_cast<float>(accelerationArr.at(i).toDouble());
        }
        payload.p_params.append(reinterpret_cast<char *>(&jogParams), sizeof (VelocityArrayStruct));
    } else {
        qDebug() << "invalid params.";
    }
}

void DMagicianProtocol::encodeGetJOGCoordinateParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 71;
    payload.p_ctrl.c_rw = 0;
}

//! [72]
void DMagicianProtocol::encodeSetJOGCommonParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 72;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("velocityRatio")) {
        qDebug() << "'velocityRatio':missing, use (0.0)";
    } else if (!params.value("velocityRatio").isDouble()) {
        qWarning() << "'velocityRatio':type error";
    }
    if (!params.contains("accelerationRatio")) {
        qDebug() << "'accelerationRatio':missing, use (0.0)";
    } else if (!params.value("accelerationRatio").isDouble()) {
        qWarning() << "'accelerationRatio':type error";
    }

    VelocityRatioStruct jogParams;
    jogParams.velocityRatio = static_cast<float>(params.value("velocityRatio").toDouble());
    jogParams.accelerationRatio = static_cast<float>(params.value("accelerationRatio").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&jogParams), sizeof (VelocityRatioStruct));
}

void DMagicianProtocol::encodeGetJOGCommonParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 72;
    payload.p_ctrl.c_rw = 0;
}

//! [73]
void DMagicianProtocol::encodeSetJOGCmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 73;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("isJoint")) {
        qDebug() << "'isJoint':missing, use (false)";
    } else if (!params.value("isJoint").isBool()) {
        qWarning() << "'isJoint':type error";
    }
    if (!params.contains("cmd")) {
        qDebug() << "'cmd':missing, use (0)";
    } else if (!params.value("cmd").isDouble()) {
        qWarning() << "'cmd':type error";
    }

    quint8 isJoint = params.value("isJoint").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&isJoint), sizeof (quint8));

    quint8 cmd = static_cast<quint8>(params.value("cmd").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&cmd), sizeof (quint8));
}

//! [74]
void DMagicianProtocol::encodeSetJOGLParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 74;
    payload.p_ctrl.c_rw = 1;

    VelocityStruct jogParams;
    jogParams.velocity = static_cast<float>(params.value("velocity").toDouble());
    jogParams.acceleration = static_cast<float>(params.value("acceleration").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&jogParams), sizeof (VelocityStruct));
}

void DMagicianProtocol::encodeGetJOGLParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 74;
    payload.p_ctrl.c_rw = 0;
}

//! [80]
void DMagicianProtocol::encodeSetPTPJointParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 80;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("velocity")) {
        qDebug() << "'velocity':missing";
    } else if (!params.value("velocity").isArray()) {
        qWarning() << "'velocity':type error";
    }
    if (!params.contains("acceleration")) {
        qDebug() << "'acceleration':missing";
    } else if (!params.value("acceleration").isArray()) {
        qWarning() << "'acceleration':type error";
    }

    QJsonArray velocityArr = params.value("velocity").toArray();
    QJsonArray accelerationArr = params.value("acceleration").toArray();

    if (velocityArr.count() >= 4 && accelerationArr.count() >= 4) {
        VelocityArrayStruct ptpJointParams;
        for(int i = 0; i < 4; i++) {
            ptpJointParams.velocity[i] = static_cast<float>(velocityArr.at(i).toDouble());
            ptpJointParams.acceleration[i] = static_cast<float>(accelerationArr.at(i).toDouble());
        }
        payload.p_params.append(reinterpret_cast<char *>(&ptpJointParams), sizeof (VelocityArrayStruct));
    } else {
        qDebug() << "invalid params.";
    }
}

void DMagicianProtocol::encodeGetPTPJointParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 80;
    payload.p_ctrl.c_rw = 0;
}

//! [81]
void DMagicianProtocol::encodeSetPTPCoordinateParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 81;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("rVelocity")) {
        qDebug() << "'rVelocity':missing, use (0.0)";
    } else if (!params.value("rVelocity").isDouble()) {
        qWarning() << "'rVelocity':type error";
    }
    if (!params.contains("xyzVelocity")) {
        qDebug() << "'xyzVelocity':missing, use (0.0)";
    } else if (!params.value("xyzVelocity").isDouble()) {
        qWarning() << "'xyzVelocity':type error";
    }
    if (!params.contains("rAcceleration")) {
        qDebug() << "'rAcceleration':missing, use (0.0)";
    } else if (!params.value("rAcceleration").isDouble()) {
        qWarning() << "'rAcceleration':type error";
    }
    if (!params.contains("xyzAcceleration")) {
        qDebug() << "'xyzAcceleration':missing, use (0.0)";
    } else if (!params.value("xyzAcceleration").isDouble()) {
        qWarning() << "'xyzAcceleration':type error";
    }

    PTPCoordinateParamsStruct ptpCoordinateParams;
    ptpCoordinateParams.rVelocity = static_cast<float>(params.value("rVelocity").toDouble());
    ptpCoordinateParams.xyzVelocity = static_cast<float>(params.value("xyzVelocity").toDouble());
    ptpCoordinateParams.rAcceleration = static_cast<float>(params.value("rAcceleration").toDouble());
    ptpCoordinateParams.xyzAcceleration = static_cast<float>(params.value("xyzAcceleration").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&ptpCoordinateParams), sizeof (PTPCoordinateParamsStruct));
}

void DMagicianProtocol::encodeGetPTPCoordinateParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 81;
    payload.p_ctrl.c_rw = 0;
}

//! [82]
void DMagicianProtocol::encodeSetPTPJumpParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 82;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("jumpHeight")) {
        qDebug() << "'jumpHeight':missing, use (0.0)";
    } else if (!params.value("jumpHeight").isDouble()) {
        qWarning() << "'jumpHeight':type error";
    }
    if (!params.contains("zLimit")) {
        qDebug() << "'zLimit':missing, use (0.0)";
    } else if (!params.value("zLimit").isDouble()) {
        qWarning() << "'zLimit':type error";
    }

    float jumpHeight = static_cast<float>(params.value("jumpHeight").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&jumpHeight), sizeof (float));

    float zLimit = static_cast<float>(params.value("zLimit").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&zLimit), sizeof (float));
}

void DMagicianProtocol::encodeGetPTPJumpParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 82;
    payload.p_ctrl.c_rw = 0;
}

//! [83]
void DMagicianProtocol::encodeSetPTPCommonParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 83;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("velocityRatio")) {
        qDebug() << "'velocityRatio':missing, use (0.0)";
    } else if (!params.value("velocityRatio").isDouble()) {
        qWarning() << "'velocityRatio':type error";
    }
    if (!params.contains("accelerationRatio")) {
        qDebug() << "'accelerationRatio':missing, use (0.0)";
    } else if (!params.value("accelerationRatio").isDouble()) {
        qWarning() << "'accelerationRatio':type error";
    }

    VelocityRatioStruct ptpParams;
    ptpParams.velocityRatio = static_cast<float>(params.value("velocityRatio").toDouble());
    ptpParams.accelerationRatio = static_cast<float>(params.value("accelerationRatio").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&ptpParams), sizeof (VelocityRatioStruct));
}

void DMagicianProtocol::encodeGetPTPCommonParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 83;
    payload.p_ctrl.c_rw = 0;
}

//! [84]
void DMagicianProtocol::encodeSetPTPCmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 84;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("ptpMode")) {
        qDebug() << "'ptpMode':missing, use (0)";
    } else if (!params.value("ptpMode").isDouble()) {
        qWarning() << "'ptpMode':type error";
    }
    if (!params.contains("x")) {
        qDebug() << "'x':missing, use (0.0)";
    } else if (!params.value("x").isDouble()) {
        qWarning() << "'x':type error";
    }
    if (!params.contains("y")) {
        qDebug() << "'y':missing, use (0.0)";
    } else if (!params.value("y").isDouble()) {
        qWarning() << "'y':type error";
    }
    if (!params.contains("z")) {
        qDebug() << "'z':missing, use (0.0)";
    } else if (!params.value("z").isDouble()) {
        qWarning() << "'z':type error";
    }
    if (!params.contains("r")) {
        qDebug() << "'r':missing, use (0.0)";
    } else if (!params.value("r").isDouble()) {
        qWarning() << "'r':type error";
    }

    PTPCmdStruct ptpCmd;
    ptpCmd.ptpMode = static_cast<quint8>(params.value("ptpMode").toInt());
    ptpCmd.x = static_cast<float>(params.value("x").toDouble());
    ptpCmd.y = static_cast<float>(params.value("y").toDouble());
    ptpCmd.z = static_cast<float>(params.value("z").toDouble());
    ptpCmd.r = static_cast<float>(params.value("r").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&ptpCmd), sizeof (PTPCmdStruct));
}

//! [85]
void DMagicianProtocol::encodeSetPTPLParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 85;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("velocity")) {
        qDebug() << "'velocity':missing, use (0.0)";
    } else if (!params.value("velocity").isDouble()) {
        qWarning() << "'velocity':type error";
    }
    if (!params.contains("acceleration")) {
        qDebug() << "'acceleration':missing, use (0.0)";
    } else if (!params.value("acceleration").isDouble()) {
        qWarning() << "'acceleration':type error";
    }

    VelocityStruct ptpLParams;
    ptpLParams.velocity = static_cast<float>(params.value("velocity").toDouble());
    ptpLParams.acceleration = static_cast<float>(params.value("acceleration").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&ptpLParams), sizeof (VelocityStruct));
}

void DMagicianProtocol::encodeGetPTPLParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 85;
    payload.p_ctrl.c_rw = 0;
}

//! [86]
void DMagicianProtocol::encodeSetPTPWithLCmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 86;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("ptpMode")) {
        qDebug() << "'ptpMode':missing, use (0)";
    } else if (!params.value("ptpMode").isDouble()) {
        qWarning() << "'ptpMode':type error";
    }
    if (!params.contains("x")) {
        qDebug() << "'x':missing, use (0.0)";
    } else if (!params.value("x").isDouble()) {
        qWarning() << "'x':type error";
    }
    if (!params.contains("y")) {
        qDebug() << "'y':missing, use (0.0)";
    } else if (!params.value("y").isDouble()) {
        qWarning() << "'y':type error";
    }
    if (!params.contains("z")) {
        qDebug() << "'z':missing, use (0.0)";
    } else if (!params.value("z").isDouble()) {
        qWarning() << "'z':type error";
    }
    if (!params.contains("r")) {
        qDebug() << "'r':missing, use (0.0)";
    } else if (!params.value("r").isDouble()) {
        qWarning() << "'r':type error";
    }
    if (!params.contains("l")) {
        qDebug() << "'l':missing, use (0.0)";
    } else if (!params.value("l").isDouble()) {
        qWarning() << "'l':type error";
    }

    PTPWithLCmdStruct ptpWithLParams;
    ptpWithLParams.ptpMode = static_cast<quint8>(params.value("ptpMode").toInt());
    ptpWithLParams.x = static_cast<float>(params.value("x").toDouble());
    ptpWithLParams.y = static_cast<float>(params.value("y").toDouble());
    ptpWithLParams.z = static_cast<float>(params.value("z").toDouble());
    ptpWithLParams.r = static_cast<float>(params.value("r").toDouble());
    ptpWithLParams.l = static_cast<float>(params.value("l").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&ptpWithLParams), sizeof (PTPWithLCmdStruct));
}

//! [87]
void DMagicianProtocol::encodeSetPTPJump2Params(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 87;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("startJumpHeight")) {
        qDebug() << "'startJumpHeight':missing, use (0.0)";
    } else if (!params.value("startJumpHeight").isDouble()) {
        qWarning() << "'startJumpHeight':type error";
    }
    if (!params.contains("endJumpHeight")) {
        qDebug() << "'endJumpHeight':missing, use (0.0)";
    } else if (!params.value("endJumpHeight").isDouble()) {
        qWarning() << "'endJumpHeight':type error";
    }
    if (!params.contains("zLimit")) {
        qDebug() << "'zLimit':missing, use (0.0)";
    } else if (!params.value("zLimit").isDouble()) {
        qWarning() << "'zLimit':type error";
    }

    PTPJump2ParamsStruct ptpParams;
    ptpParams.startJumpHeight = static_cast<float>(params.value("startJumpHeight").toDouble());
    ptpParams.endJumpHeight = static_cast<float>(params.value("endJumpHeight").toDouble());
    ptpParams.zLimit = static_cast<float>(params.value("zLimit").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&ptpParams), sizeof (PTPJump2ParamsStruct));
}

void DMagicianProtocol::encodeGetPTPJump2Params(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 87;
    payload.p_ctrl.c_rw = 0;
}

//! [88]
void DMagicianProtocol::encodeSetPTPPOCmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 88;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("ptpCmd")) {
        qWarning() << "'ptpCmd':missing";
    }
    if (!params.contains("poCmd")) {
        qWarning() << "'poCmd':missing";
    }

    QJsonObject ptpCmdObj = params.value("ptpCmd").toObject();
    QJsonArray poCmdArray = params.value("poCmd").toArray();

    PTPCmdStruct ptpCmd;
    ptpCmd.ptpMode = static_cast<quint8>(ptpCmdObj.value("ptpMode").toInt());
    ptpCmd.x = static_cast<float>(ptpCmdObj.value("x").toDouble());
    ptpCmd.y = static_cast<float>(ptpCmdObj.value("y").toDouble());
    ptpCmd.z = static_cast<float>(ptpCmdObj.value("z").toDouble());
    ptpCmd.r = static_cast<float>(ptpCmdObj.value("r").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&ptpCmd), sizeof (PTPCmdStruct));

    quint8 count = static_cast<quint8>(poCmdArray.count());
    payload.p_params.append(reinterpret_cast<char *>(&count), sizeof (quint8));

    for (int i = 0; i < poCmdArray.count(); i++) {
        QJsonObject poCmdObj = poCmdArray.at(i).toObject();

        POCmdStruct poCmd;
        poCmd.ratio = static_cast<quint8>(poCmdObj.value("ratio").toInt());
        poCmd.port = static_cast<quint16>(poCmdObj.value("port").toInt());
        poCmd.level = static_cast<quint8>(poCmdObj.value("level").toInt());

        payload.p_params.append(reinterpret_cast<char *>(&poCmd), sizeof (POCmdStruct));
    }
}

//! [89]
void DMagicianProtocol::encodeSetPTPPOWithLCmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 89;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("ptpCmd")) {
        qWarning() << "'ptpCmd':missing";
    }
    if (!params.contains("poCmd")) {
        qWarning() << "'poCmd':missing";
    }

    QJsonObject ptpCmdObj = params.value("ptpCmd").toObject();
    QJsonArray poCmdArray = params.value("poCmd").toArray();

    PTPWithLCmdStruct ptpCmd;
    ptpCmd.ptpMode = static_cast<quint8>(ptpCmdObj.value("ptpMode").toInt());
    ptpCmd.x = static_cast<float>(ptpCmdObj.value("x").toDouble());
    ptpCmd.y = static_cast<float>(ptpCmdObj.value("y").toDouble());
    ptpCmd.z = static_cast<float>(ptpCmdObj.value("z").toDouble());
    ptpCmd.l = static_cast<float>(ptpCmdObj.value("l").toDouble());
    ptpCmd.r = static_cast<float>(ptpCmdObj.value("r").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&ptpCmd), sizeof (PTPCmdStruct));

    quint8 count = static_cast<quint8>(poCmdArray.count());
    payload.p_params.append(reinterpret_cast<char *>(&count), sizeof (quint8));

    for (int i = 0; i < count; i++) {
        QJsonObject poCmdObj = poCmdArray.at(i).toObject();

        POCmdStruct poCmd;
        poCmd.ratio = static_cast<quint8>(poCmdObj.value("ratio").toInt());
        poCmd.port = static_cast<quint16>(poCmdObj.value("port").toInt());
        poCmd.level = static_cast<quint8>(poCmdObj.value("level").toInt());

        payload.p_params.append(reinterpret_cast<char *>(&poCmd), sizeof (POCmdStruct));
    }
}

//! [90]
void DMagicianProtocol::encodeSetCPParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 90;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("targetAcc")) {
        qDebug() << "'targetAcc':missing, use (0.0)";
    } else if (!params.value("targetAcc").isDouble()) {
        qWarning() << "'targetAcc':type error";
    }
    if (!params.contains("junctionVel")) {
        qDebug() << "'junctionVel':missing, use (0.0)";
    } else if (!params.value("junctionVel").isDouble()) {
        qWarning() << "'junctionVel':type error";
    }
    if (!params.contains("isRealTimeTrack")) {
        qDebug() << "'isRealTimeTrack':missing, use (false)";
    } else if (!params.value("isRealTimeTrack").isBool()) {
        qWarning() << "'isRealTimeTrack':type error";
    }

    CPParamsStruct cpParams;
    cpParams.targetAcc = static_cast<float>(params.value("targetAcc").toDouble());
    cpParams.junctionVel = static_cast<float>(params.value("junctionVel").toDouble());

    bool isRealTimeTrack = params.value("isRealTimeTrack").toBool();
    if (isRealTimeTrack) {
        cpParams.realTimeTrack = 1;
        cpParams.period = static_cast<float>(params.value("period").toDouble());
    } else {
        cpParams.realTimeTrack = 0;
        cpParams.acc = static_cast<float>(params.value("acc").toDouble());
    }

    payload.p_params.append(reinterpret_cast<char *>(&cpParams), sizeof (CPParamsStruct));
}

void DMagicianProtocol::encodeGetCPParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 90;
    payload.p_ctrl.c_rw = 0;
}

//! [91]
void DMagicianProtocol::encodeSetCPCmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 91;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("cpMode")) {
        qDebug() << "'cpMode':missing, use (0)";
    } else if (!params.value("cpMode").isDouble()) {
        qWarning() << "'cpMode':type error";
    }
    if (!params.contains("x")) {
        qDebug() << "'x':missing, use (0.0)";
    } else if (!params.value("x").isDouble()) {
        qWarning() << "'x':type error";
    }
    if (!params.contains("y")) {
        qDebug() << "'y':missing, use (0.0)";
    } else if (!params.value("y").isDouble()) {
        qWarning() << "'y':type error";
    }
    if (!params.contains("z")) {
        qDebug() << "'z':missing, use (0.0)";
    } else if (!params.value("z").isDouble()) {
        qWarning() << "'z':type error";
    }
    if (!params.contains("velocity")) {
        qDebug() << "'velocity':missing, use (0.0)";
    } else if (!params.value("velocity").isDouble()) {
        qWarning() << "'velocity':type error";
    }
    if (!params.contains("power")) {
        qDebug() << "'power':missing, use (0.0)";
    } else if (!params.value("power").isDouble()) {
        qWarning() << "'power':type error";
    }

    CPCmdStruct cpCmd;
    cpCmd.cpMode = static_cast<quint8>(params.value("cpMode").toInt());
    cpCmd.x = static_cast<float>(params.value("x").toDouble());
    cpCmd.y = static_cast<float>(params.value("y").toDouble());
    cpCmd.z = static_cast<float>(params.value("z").toDouble());
    cpCmd.velocity = static_cast<float>(params.value("velocity").toDouble());
    cpCmd.power = static_cast<float>(params.value("power").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&cpCmd), sizeof (CPCmdStruct));
}

//! [92]
void DMagicianProtocol::encodeSetCPLECmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 92;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("cpMode")) {
        qDebug() << "'cpMode':missing, use (0)";
    } else if (!params.value("cpMode").isDouble()) {
        qWarning() << "'cpMode':type error";
    }
    if (!params.contains("x")) {
        qDebug() << "'x':missing, use (0.0)";
    } else if (!params.value("x").isDouble()) {
        qWarning() << "'x':type error";
    }
    if (!params.contains("y")) {
        qDebug() << "'y':missing, use (0.0)";
    } else if (!params.value("y").isDouble()) {
        qWarning() << "'y':type error";
    }
    if (!params.contains("z")) {
        qDebug() << "'z':missing, use (0.0)";
    } else if (!params.value("z").isDouble()) {
        qWarning() << "'z':type error";
    }
    if (!params.contains("velocity")) {
        qDebug() << "'velocity':missing, use (0.0)";
    } else if (!params.value("velocity").isDouble()) {
        qWarning() << "'velocity':type error";
    }
    if (!params.contains("power")) {
        qDebug() << "'power':missing, use (0.0)";
    } else if (!params.value("power").isDouble()) {
        qWarning() << "'power':type error";
    }

    CPCmdStruct cpCmd;
    cpCmd.cpMode = static_cast<quint8>(params.value("cpMode").toInt());
    cpCmd.x = static_cast<float>(params.value("x").toDouble());
    cpCmd.y = static_cast<float>(params.value("y").toDouble());
    cpCmd.z = static_cast<float>(params.value("z").toDouble());
    cpCmd.velocity = static_cast<float>(params.value("velocity").toDouble());
    cpCmd.power = static_cast<float>(params.value("power").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&cpCmd), sizeof (CPCmdStruct));
}

//! [93]
void DMagicianProtocol::encodeSetCPRHeadHoldEnable(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 93;
    payload.p_ctrl.c_rw = 1;
}

void DMagicianProtocol::encodeGetCPRHeadHoldEnable(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 93;
    payload.p_ctrl.c_rw = 0;
}

//! [94]
void DMagicianProtocol::encodeSetCPCommonParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 94;
    payload.p_ctrl.c_rw = 1;
}

void DMagicianProtocol::encodeGetCPCommonParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 94;
    payload.p_ctrl.c_rw = 0;
}

//! [95]
void DMagicianProtocol::encodeSetCP2Cmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 95;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("cpMode")) {
        qDebug() << "'cpMode':missing, use (0)";
    } else if (!params.value("cpMode").isDouble()) {
        qWarning() << "'cpMode':type error";
    }
    if (!params.contains("x")) {
        qDebug() << "'x':missing, use (0.0)";
    } else if (!params.value("x").isDouble()) {
        qWarning() << "'x':type error";
    }
    if (!params.contains("y")) {
        qDebug() << "'y':missing, use (0.0)";
    } else if (!params.value("y").isDouble()) {
        qWarning() << "'y':type error";
    }
    if (!params.contains("z")) {
        qDebug() << "'z':missing, use (0.0)";
    } else if (!params.value("z").isDouble()) {
        qWarning() << "'z':type error";
    }

    CP2CmdStruct cp2cmd;
    cp2cmd.cpMode = static_cast<quint8>(params.value("cpMode").toInt());
    cp2cmd.x = static_cast<float>(params.value("x").toDouble());
    cp2cmd.y = static_cast<float>(params.value("y").toDouble());
    cp2cmd.z = static_cast<float>(params.value("z").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&cp2cmd), sizeof (CP2CmdStruct));
}

//! [100]
void DMagicianProtocol::encodeSetARCParams(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 100;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("xyzVelocity")) {
        qDebug() << "'xyzVelocity':missing, use (0.0)";
    } else if (!params.value("xyzVelocity").isDouble()) {
        qWarning() << "'xyzVelocity':type error";
    }
    if (!params.contains("rVelocity")) {
        qDebug() << "'rVelocity':missing, use (0.0)";
    } else if (!params.value("rVelocity").isDouble()) {
        qWarning() << "'rVelocity':type error";
    }
    if (!params.contains("xyzAcceleration")) {
        qDebug() << "'xyzAcceleration':missing, use (0.0)";
    } else if (!params.value("xyzAcceleration").isDouble()) {
        qWarning() << "'xyzAcceleration':type error";
    }
    if (!params.contains("rAcceleration")) {
        qDebug() << "'rAcceleration':missing, use (0.0)";
    } else if (!params.value("rAcceleration").isDouble()) {
        qWarning() << "'rAcceleration':type error";
    }

    ARCParamsStruct arcParams;
    arcParams.xyzVelocity = static_cast<float>(params.value("xyzVelocity").toDouble());
    arcParams.rVelocity = static_cast<float>(params.value("rVelocity").toDouble());
    arcParams.xyzAcceleration = static_cast<float>(params.value("xyzAcceleration").toDouble());
    arcParams.rAcceleration = static_cast<float>(params.value("rAcceleration").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&arcParams), sizeof (ARCParamsStruct));
}

void DMagicianProtocol::encodeGetARCParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 100;
    payload.p_ctrl.c_rw = 0;
}

//! [101]
void DMagicianProtocol::encodeSetARCCmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 101;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("cirPoint")) {
        qWarning() << "'cirPoint':missing";
    }
    if (!params.contains("toPoint")) {
        qWarning() << "'toPoint':missing";
    }

    ARCCmdStruct arcCmd;

    QJsonObject cirPointObj = params.value("cirPoint").toObject();
    arcCmd.cirPoint.x = static_cast<float>(cirPointObj.value("x").toDouble());
    arcCmd.cirPoint.y = static_cast<float>(cirPointObj.value("y").toDouble());
    arcCmd.cirPoint.z = static_cast<float>(cirPointObj.value("z").toDouble());
    arcCmd.cirPoint.r = static_cast<float>(cirPointObj.value("r").toDouble());

    QJsonObject toPointObj = params.value("toPoint").toObject();
    arcCmd.toPoint.x = static_cast<float>(toPointObj.value("x").toDouble());
    arcCmd.toPoint.y = static_cast<float>(toPointObj.value("y").toDouble());
    arcCmd.toPoint.z = static_cast<float>(toPointObj.value("z").toDouble());
    arcCmd.toPoint.r = static_cast<float>(toPointObj.value("r").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&arcCmd), sizeof (ARCCmdStruct));
}

//! [102]
void DMagicianProtocol::encodeSetCircleCmd(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 102;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("cirPoint")) {
        qWarning() << "'cirPoint':missing";
    }
    if (!params.contains("toPoint")) {
        qWarning() << "'toPoint':missing";
    }
    if (!params.contains("count")) {
        qWarning() << "'count':missing";
    }

    CircleCmdStruct circleCmd;

    QJsonObject cirPointObj = params.value("cirPoint").toObject();
    circleCmd.cirPoint.x = static_cast<float>(cirPointObj.value("x").toDouble());
    circleCmd.cirPoint.y = static_cast<float>(cirPointObj.value("y").toDouble());
    circleCmd.cirPoint.z = static_cast<float>(cirPointObj.value("z").toDouble());
    circleCmd.cirPoint.r = static_cast<float>(cirPointObj.value("r").toDouble());

    QJsonObject toPointObj = params.value("toPoint").toObject();
    circleCmd.toPoint.x = static_cast<float>(toPointObj.value("x").toDouble());
    circleCmd.toPoint.y = static_cast<float>(toPointObj.value("y").toDouble());
    circleCmd.toPoint.z = static_cast<float>(toPointObj.value("z").toDouble());
    circleCmd.toPoint.r = static_cast<float>(toPointObj.value("r").toDouble());

    circleCmd.count = static_cast<quint32>(toPointObj.value("count").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&circleCmd), sizeof (CircleCmdStruct));
}

//! [103]
void DMagicianProtocol::encodeSetARCCommonParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 103;
    payload.p_ctrl.c_rw = 1;
}

void DMagicianProtocol::encodeGetARCCommonParams(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 103;
    payload.p_ctrl.c_rw = 0;
}

//! [110]
void DMagicianProtocol::encodeSetWAITCmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 110;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("delay")) {
        qDebug() << "'delay':missing, use (0)";
    } else if (!params.value("delay").isDouble()) {
        qWarning() << "'delay':type error";
    }

    quint32 delayMs = static_cast<quint32>(params.value("delay").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&delayMs), sizeof (quint32));
}

//! [120]
void DMagicianProtocol::encodeSetTRIGCmd(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 120;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }
    if (!params.contains("mode")) {
        qDebug() << "'mode':missing, use (0)";
    } else if (!params.value("mode").isDouble()) {
        qWarning() << "'mode':type error";
    }
    if (!params.contains("condition")) {
        qDebug() << "'condition':missing, use (0)";
    } else if (!params.value("condition").isDouble()) {
        qWarning() << "'condition':type error";
    }
    if (!params.contains("threshold")) {
        qDebug() << "'threshold':missing, use (0)";
    } else if (!params.value("threshold").isDouble()) {
        qWarning() << "'threshold':type error";
    }

    TRIGCmdStruct triggerCmd;
    triggerCmd.port = static_cast<quint8>(params.value("port").toInt());
    triggerCmd.mode = static_cast<quint8>(params.value("mode").toInt());
    triggerCmd.condition = static_cast<quint8>(params.value("condition").toInt());
    triggerCmd.threshold = static_cast<quint16>(params.value("threshold").toInt());

    payload.p_params.append(reinterpret_cast<char *>(&triggerCmd), sizeof (TRIGCmdStruct));
}

//! [130]
void DMagicianProtocol::encodeSetIOMultiplexing(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 130;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }
    if (!params.contains("multiplex")) {
        qDebug() << "'multiplex':missing, use (0)";
    } else if (!params.value("multiplex").isDouble()) {
        qWarning() << "'multiplex':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));

    quint8 level = static_cast<quint8>(params.value("multiplex").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&level), sizeof (quint8));
}

void DMagicianProtocol::encodeGetIOMultiplexing(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 130;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

//! [113]
void DMagicianProtocol::encodeSetIODO(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 131;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }
    if (!params.contains("level")) {
        qDebug() << "'level':missing, use (0)";
    } else if (!params.value("level").isDouble()) {
        qWarning() << "'level':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));

    quint8 level = static_cast<quint8>(params.value("level").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&level), sizeof (quint8));
}

void DMagicianProtocol::encodeGetIODO(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 131;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

//! [132]
void DMagicianProtocol::encodeSetIOPWM(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 132;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }
    if (!params.contains("frequency")) {
        qDebug() << "'frequency':missing, use (0.0)";
    } else if (!params.value("frequency").isDouble()) {
        qWarning() << "'frequency':type error";
    }
    if (!params.contains("dutyCycle")) {
        qDebug() << "'dutyCycle':missing, use (0.0)";
    } else if (!params.value("dutyCycle").isDouble()) {
        qWarning() << "'dutyCycle':type error";
    }

    IOPWMStruct ioPWM;
    ioPWM.port = static_cast<quint8>(params.value("port").toInt());
    ioPWM.frequency = static_cast<float>(params.value("frequency").toDouble());
    ioPWM.dutyCycle = static_cast<float>(params.value("dutyCycle").toDouble());

    payload.p_params.append(reinterpret_cast<char *>(&ioPWM), sizeof (IOPWMStruct));
}

void DMagicianProtocol::encodeGetIOPWM(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 132;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

//! [133]
void DMagicianProtocol::encodeGetIODI(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 133;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

//! [134]
void DMagicianProtocol::encodeGetIOADC(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 134;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

//! [135]
void DMagicianProtocol::encodeSetEMotor(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 135;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("index")) {
        qDebug() << "'index':missing, use (0)";
    } else if (!params.value("index").isDouble()) {
        qWarning() << "'index':type error";
    }
    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("speed")) {
        qDebug() << "'speed':missing, use (0)";
    } else if (!params.value("speed").isDouble()) {
        qWarning() << "'speed':type error";
    }

    EMotorStruct eMotor;
    eMotor.index = static_cast<quint8>(params.value("index").toInt());
    eMotor.isEnabled = params.value("enable").toBool() ? 1 : 0;
    eMotor.speed = params.value("speed").toInt();

    payload.p_params.append(reinterpret_cast<char *>(&eMotor), sizeof (EMotorStruct));
}

//! [136]
void DMagicianProtocol::encodeSetEMotorS(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 136;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("index")) {
        qDebug() << "'index':missing, use (0)";
    } else if (!params.value("index").isDouble()) {
        qWarning() << "'index':type error";
    }
    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("speed")) {
        qDebug() << "'speed':missing, use (0)";
    } else if (!params.value("speed").isDouble()) {
        qWarning() << "'speed':type error";
    }
    if (!params.contains("distance")) {
        qDebug() << "'distance':missing, use (0)";
    } else if (!params.value("distance").isDouble()) {
        qWarning() << "'distance':type error";
    }

    EMotorSStruct eMotors;
    eMotors.index = static_cast<quint8>(params.value("index").toInt());
    eMotors.isEnabled = params.value("enable").toBool() ? 1 : 0;
    eMotors.speed = params.value("speed").toInt();
    eMotors.distance = static_cast<quint32>(params.value("distance").toInt());

    payload.p_params.append(reinterpret_cast<char *>(&eMotors), sizeof (EMotorSStruct));
}

//! [137]
void DMagicianProtocol::encodeSetColorSensor(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 137;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }
    if (!params.contains("version")) {
        qDebug() << "'version':missing, use (0)";
    } else if (!params.value("version").isDouble()) {
        qWarning() << "'version':type error";
    }

    quint8 enable = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&enable), sizeof (quint8));

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));

    quint8 version = static_cast<quint8>(params.value("version").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&version), sizeof (quint8));
}

void DMagicianProtocol::encodeGetColorSensor(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 137;
    payload.p_ctrl.c_rw = 0;
}

//! [138]
void DMagicianProtocol::encodeSetInfraredSensor(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 138;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }
    if (!params.contains("version")) {
        qDebug() << "'version':missing, use (0)";
    } else if (!params.value("version").isDouble()) {
        qWarning() << "'version':type error";
    }

    quint8 enable = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&enable), sizeof (quint8));

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));

    quint8 version = static_cast<quint8>(params.value("version").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&version), sizeof (quint8));
}

void DMagicianProtocol::encodeGetInfraredSensor(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 138;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

//! [139]
void DMagicianProtocol::encodeSetIICInfo(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 139;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("mode")) {
        qDebug() << "'mode':missing, use (0)";
    } else if (!params.value("mode").isDouble()) {
        qWarning() << "'mode':type error";
    }
    if (!params.contains("mainIndex")) {
        qDebug() << "'mainIndex':missing, use (0)";
    } else if (!params.value("mainIndex").isDouble()) {
        qWarning() << "'mainIndex':type error";
    }

    quint8 mode = static_cast<quint8>(params.value("mode").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&mode), sizeof (quint8));

    quint8 mainIndex = static_cast<quint8>(params.value("mainIndex").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&mainIndex), sizeof (quint8));
}

void DMagicianProtocol::encodeGetIICInfo(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 139;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("mode")) {
        qDebug() << "'mode':missing, use (0)";
    } else if (!params.value("mode").isDouble()) {
        qWarning() << "'mode':type error";
    }
    if (!params.contains("mainIndex")) {
        qDebug() << "'mainIndex':missing, use (0)";
    } else if (!params.value("mainIndex").isDouble()) {
        qWarning() << "'mainIndex':type error";
    }
    if (!params.contains("subIndex")) {
        qDebug() << "'subIndex':missing, use (0)";
    } else if (!params.value("subIndex").isDouble()) {
        qWarning() << "'subIndex':type error";
    }

    quint8 mode = static_cast<quint8>(params.value("mode").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&mode), sizeof (quint8));

    quint8 mainIndex = static_cast<quint8>(params.value("mainIndex").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&mainIndex), sizeof (quint8));

    quint8 subIndex = static_cast<quint8>(params.value("subIndex").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&subIndex), sizeof (quint8));
}

//! [140]
void DMagicianProtocol::encodeSetAngleSensorStaticError(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 140;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("rearArmAngleError")) {
        qDebug() << "'rearArmAngleError':missing, use (0.0)";
    } else if (!params.value("rearArmAngleError").isDouble()) {
        qWarning() << "'rearArmAngleError':type error";
    }
    if (!params.contains("frontArmAngleError")) {
        qDebug() << "'frontArmAngleError':missing, use (0.0)";
    } else if (!params.value("frontArmAngleError").isDouble()) {
        qWarning() << "'frontArmAngleError':type error";
    }

    float rearArmAngleError = static_cast<float>(params.value("rearArmAngleError").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&rearArmAngleError), sizeof (float));

    float frontArmAngleError = static_cast<float>(params.value("frontArmAngleError").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&frontArmAngleError), sizeof (float));
}

void DMagicianProtocol::encodeGetAngleSensorStaticError(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 140;
    payload.p_ctrl.c_rw = 0;
}

//! [141]
void DMagicianProtocol::encodeSetAngleSensorCoef(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 141;
    payload.p_ctrl.c_rw = 1;
}

void DMagicianProtocol::encodeGetAngleSensorCoef(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 141;
    payload.p_ctrl.c_rw = 0;
}

//! [142]
void DMagicianProtocol::encodeSetBaseDecoderStaticError(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 142;
    payload.p_ctrl.c_rw = 1;
}

void DMagicianProtocol::encodeGetBaseDecoderStaticError(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 142;
    payload.p_ctrl.c_rw = 0;
}

//! [143]
void DMagicianProtocol::encodeSetLRHandCalibrateValue(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 143;
    payload.p_ctrl.c_rw = 1;
}

void DMagicianProtocol::encodeGetLRHandCalibrateValue(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 143;
    payload.p_ctrl.c_rw = 0;
}

//! [150]
void DMagicianProtocol::encodeSetWIFIConfigMode(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 150;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }

    quint8 enable = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&enable), sizeof (quint8));
}

void DMagicianProtocol::encodeGetWIFIConfigMode(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 150;
    payload.p_ctrl.c_rw = 0;
}

//TODO
//! [151]
void DMagicianProtocol::encodeSetWIFISSID(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 151;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("ssid")) {
        qDebug() << "'ssid':missing, use ''";
    } else if (!params.value("ssid").isString()) {
        qWarning() << "'ssid':type error";
    }

    char* ssid = params.value("ssid").toString().toLatin1().data();
    payload.p_params.append(ssid, sizeof (char*));
}

void DMagicianProtocol::encodeGetWIFISSID(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 151;
    payload.p_ctrl.c_rw = 0;
}

//! [152]
void DMagicianProtocol::encodeSetWIFIPassword(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 152;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("password")) {
        qDebug() << "'password':missing, use ''";
    } else if (!params.value("password").isString()) {
        qWarning() << "'password':type error";
    }

    char* password = params.value("password").toString().toLatin1().data();
    payload.p_params.append(password, sizeof (char*));
}

void DMagicianProtocol::encodeGetWIFIPassword(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 152;
    payload.p_ctrl.c_rw = 0;
}

//! [153]
void DMagicianProtocol::encodeSetWIFIIPAddress(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 153;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("address")) {
        qDebug() << "'address':missing";
    } else if (!params.value("address").isString()) {
        qWarning() << "'address':type error";
    }

    WIFIIPAddressStruct wifiIpAddress;
    QJsonArray addressArray = params.value("address").toArray();
    for (int i = 0; i < addressArray.size(); ++i) {
        wifiIpAddress.address[i] = static_cast<quint8>(addressArray.at(i).toInt());
    }
    wifiIpAddress.dhcp = static_cast<quint8>(params.value("dhcp").toInt());

    payload.p_params.append(reinterpret_cast<char *>(&wifiIpAddress), sizeof (WIFIIPAddressStruct));
}

void DMagicianProtocol::encodeGetWIFIIPAddress(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 153;
    payload.p_ctrl.c_rw = 0;
}

//! [154]
void DMagicianProtocol::encodeSetWIFINetmask(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 154;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("address")) {
        qDebug() << "'address':missing";
    } else if (!params.value("address").isString()) {
        qWarning() << "'address':type error";
    }

    WifiAddressStruct wifiNetMask;
    QJsonArray addressArray = params.value("address").toArray();
    for (int i = 0; i < addressArray.size(); ++i) {
        wifiNetMask.address[i] = static_cast<quint8>(addressArray.at(i).toInt());
    }

    payload.p_params.append(reinterpret_cast<char *>(&wifiNetMask), sizeof (WifiAddressStruct));
}

void DMagicianProtocol::encodeGetWIFINetmask(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 154;
    payload.p_ctrl.c_rw = 0;
}

//! [155]
void DMagicianProtocol::encodeSetWIFIGateway(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 155;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("address")) {
        qDebug() << "'address':missing";
    } else if (!params.value("address").isString()) {
        qWarning() << "'address':type error";
    }

    WifiAddressStruct wifiGateWay;
    QJsonArray addressArray = params.value("address").toArray();
    for (int i = 0; i < addressArray.size(); ++i) {
        wifiGateWay.address[i] = static_cast<quint8>(addressArray.at(i).toInt());
    }

    payload.p_params.append(reinterpret_cast<char *>(&wifiGateWay), sizeof (WifiAddressStruct));
}

void DMagicianProtocol::encodeGetWIFIGateway(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 155;
    payload.p_ctrl.c_rw = 0;
}

//! [156]
void DMagicianProtocol::encodeSetWIFIDNS(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 156;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("address")) {
        qDebug() << "'address':missing";
    } else if (!params.value("address").isString()) {
        qWarning() << "'address':type error";
    }

    WifiAddressStruct wifiDns;
    QJsonArray addressArray = params.value("address").toArray();
    for (int i = 0; i < addressArray.size(); ++i) {
        wifiDns.address[i] = static_cast<quint8>(addressArray.at(i).toInt());
    }

    payload.p_params.append(reinterpret_cast<char *>(&wifiDns), sizeof (WifiAddressStruct));
}

void DMagicianProtocol::encodeGetWIFIDNS(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 156;
    payload.p_ctrl.c_rw = 0;
}

//! [157]
void DMagicianProtocol::encodeGetWIFIConnectStatus(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 157;
    payload.p_ctrl.c_rw = 0;
}

//! [170]
void DMagicianProtocol::encodeSetLostStepValue(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 170;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("value")) {
        qDebug() << "'value':missing, use (0.0)";
    } else if (!params.value("value").isDouble()) {
        qWarning() << "'value':type error";
    }

    float value = static_cast<float>(params.value("value").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&value), sizeof (float));
}

//! [171]
void DMagicianProtocol::encodeSetLostStepCmd(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 171;
    payload.p_ctrl.c_rw = 1;
}

//! [172]
void DMagicianProtocol::encodeSetCollisionCheck(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 172;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("enable")) {
        qDebug() << "'enable':missing, use (false)";
    } else if (!params.value("enable").isBool()) {
        qWarning() << "'enable':type error";
    }
    if (!params.contains("threshold")) {
        qDebug() << "'threshold':missing, use (0.0)";
    } else if (!params.value("threshold").isDouble()) {
        qWarning() << "'threshold':type error";
    }

    quint8 on = params.value("enable").toBool() ? 1 : 0;
    payload.p_params.append(reinterpret_cast<char *>(&on), sizeof (quint8));

    float threshold = static_cast<float>(params.value("threshold").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&threshold), sizeof (float));
}

void DMagicianProtocol::encodeGetCollisionCheck(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 172;
    payload.p_ctrl.c_rw = 0;
}

//! [192]
void DMagicianProtocol::encodeGetDeviceStatus(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 192;
    payload.p_ctrl.c_rw = 0;
}

//! [193]
void DMagicianProtocol::encodeSetDeviceRunAPP(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 193;
    payload.p_ctrl.c_rw = 0;
}

//! [194]
void DMagicianProtocol::encodeSetUpgradeStatus(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 194;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("length")) {
        qDebug() << "'length':missing";
        return;
    } else if (!params.value("length").isString()) {
        qWarning() << "'length':type error";
    }
    if (!params.contains("md5")) {
        qDebug() << "'md5':missing";
        return;
    } else if (!params.value("md5").isString()) {
        qWarning() << "'md5':type error";
    }

    /* 其中length占4字节，MD5校验码占16字节。 */
    QString length_str = params.value("length").toString();
    QByteArray length_ba;
    length_ba.append(length_str);
    QByteArray length_hex = QByteArray::fromHex(length_ba);
    if (length_hex.size() != 4) {
        return;
    }

    payload.p_params.append(reinterpret_cast<char *>(length_hex.data()), 4);

    QString md5_str = params.value("md5").toString();
    QByteArray md5_ba;
    md5_ba.append(md5_str);
    QByteArray md5_hex = QByteArray::fromHex(md5_ba);
    if (md5_hex.size() != 16) {
        return;
    }
    payload.p_params.append(reinterpret_cast<char *>(md5_hex.data()), 16);
}

void DMagicianProtocol::encodeGetUpgradeStatus(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 194;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("length")) {
        qDebug() << "'length':missing";
        return;
    } else if (!params.value("length").isString()) {
        qWarning() << "'length':type error";
    }
    if (!params.contains("md5")) {
        qDebug() << "'md5':missing";
        return;
    } else if (!params.value("md5").isString()) {
        qWarning() << "'md5':type error";
    }

    /* 其中length占4字节，MD5校验码占16字节。 */
    QString length_str = params.value("length").toString();
    QByteArray length_ba;
    length_ba.append(length_str);
    QByteArray length_hex = QByteArray::fromHex(length_ba);
    if (length_hex.size() != 4) {
        return;
    }

    payload.p_params.append(reinterpret_cast<char *>(length_hex.data()), 4);

    QString md5_str = params.value("md5").toString();
    QByteArray md5_ba;
    md5_ba.append(md5_str);
    QByteArray md5_hex = QByteArray::fromHex(md5_ba);
    if (md5_hex.size() != 16) {
        return;
    }
    payload.p_params.append(reinterpret_cast<char *>(md5_hex.data()), 16);
}

//! [195]
void DMagicianProtocol::encodeSetRunUpgrade(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 195;
    payload.p_ctrl.c_rw = 0;
}

//! [196]
void DMagicianProtocol::encodeSetStartTransmit(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 196;
    payload.p_ctrl.c_rw = 0;
}

//! [197]
void DMagicianProtocol::encodeSetUpgradeVeify(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 197;
    payload.p_ctrl.c_rw = 0;
}

//! [198]
void DMagicianProtocol::encodeSetDeviceRestart(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 198;
    payload.p_ctrl.c_rw = 1;
}

//! [210]
void DMagicianProtocol::encodeGetSeeedDistanceSensor(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 210;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

//! [211]
void DMagicianProtocol::encodeSetSeeedTempSensor(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 211;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

void DMagicianProtocol::encodeGetSeeedTempSensor(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 211;
    payload.p_ctrl.c_rw = 0;
}

//! [212]
void DMagicianProtocol::encodeSetSeeedLightSensor(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 212;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

void DMagicianProtocol::encodeGetSeeedLightSensor(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 212;
    payload.p_ctrl.c_rw = 0;

    if (!params.contains("mode")) {
        qDebug() << "'mode':missing, use (0)";
    } else if (!params.value("mode").isDouble()) {
        qWarning() << "'mode':type error";
    }

    quint8 mode = static_cast<quint8>(params.value("mode").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&mode), sizeof (quint8));
}

//! [213]
void DMagicianProtocol::encodeSetSeeedColorSensor(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 213;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));
}

void DMagicianProtocol::encodeGetSeeedColorSensor(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 213;
    payload.p_ctrl.c_rw = 0;
}

//! [214]
void DMagicianProtocol::encodeSetSeeedRGBLed(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 214;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("port")) {
        qDebug() << "'port':missing, use (0)";
    } else if (!params.value("port").isDouble()) {
        qWarning() << "'port':type error";
    }
    if (!params.contains("rgbValue")) {
        qDebug() << "'rgbValue':missing, use (0.0)";
    } else if (!params.value("rgbValue").isDouble()) {
        qWarning() << "'rgbValue':type error";
    }

    quint8 port = static_cast<quint8>(params.value("port").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&port), sizeof (quint8));

    float rgb = static_cast<float>(params.value("rgbValue").toDouble());
    payload.p_params.append(reinterpret_cast<char *>(&rgb), sizeof (float));
}

//! [215]
void DMagicianProtocol::encodeGetMCUTemperature(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 215;
    payload.p_ctrl.c_rw = 0;
}

//! [240]
void DMagicianProtocol::encodeSetQueuedCmdStart(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 240;
    payload.p_ctrl.c_rw = 1;
}

//! [241]
void DMagicianProtocol::encodeSetQueuedCmdStop(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 241;
    payload.p_ctrl.c_rw = 1;
}

//! [242]
void DMagicianProtocol::encodeSetQueuedCmdForceStop(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 242;
    payload.p_ctrl.c_rw = 1;
}

//! [243]
void DMagicianProtocol::encodeSetQueuedCmdStartDownload(PacketPayload &payload, QJsonObject params)
{
    payload.p_cmdID = 243;
    payload.p_ctrl.c_rw = 1;

    if (!params.contains("totalLoop")) {
        qDebug() << "'totalLoop':missing, use (0)";
    } else if (!params.value("totalLoop").isDouble()) {
        qWarning() << "'totalLoop':type error";
    }
    if (!params.contains("linePerLoop")) {
        qDebug() << "'linePerLoop':missing, use (0)";
    } else if (!params.value("linePerLoop").isDouble()) {
        qWarning() << "'linePerLoop':type error";
    }

    quint8 totalLoop = static_cast<quint8>(params.value("totalLoop").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&totalLoop), sizeof (quint8));

    quint8 linePerLoop = static_cast<quint8>(params.value("linePerLoop").toInt());
    payload.p_params.append(reinterpret_cast<char *>(&linePerLoop), sizeof (quint8));
}

//! [244]
void DMagicianProtocol::encodeSetQueuedCmdStopDownload(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 244;
    payload.p_ctrl.c_rw = 1;
}

//! [245]
void DMagicianProtocol::encodeSetQueuedCmdClear(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 245;
    payload.p_ctrl.c_rw = 1;
}

//! [246]
void DMagicianProtocol::encodeGetQueuedCmdCurrentIndex(PacketPayload &payload, QJsonObject params)
{
    Q_UNUSED(params)

    payload.p_cmdID = 246;
    payload.p_ctrl.c_rw = 0;
}


